{"version":3,"sources":["context/AuthProvider.tsx","components/TextInput/TextInput.tsx","components/BottomNavbar/BottomNavbar.tsx","components/Navbar/Navbar.tsx","components/PasswordInput/PasswordInput.tsx","components/Select/CustomSelect.tsx","components/LoadingIndicator/LoadingIndicator.tsx","pages/auth/ValidationSchema.ts","utils/axiosInstance.ts","context/SearchProvider.tsx","pages/auth/SignIn.tsx","pages/auth/SignUp.tsx","components/Calendar/Calendar.tsx","pages/offer/components/OfferReservation/OfferReservation.tsx","pages/offer/components/AddOpinion/AddOpinion.tsx","pages/offer/components/Opinion/Opinion.tsx","pages/offer/components/OfferOpinions/OfferOpinions.tsx","pages/offer/components/OfferCarousel/OfferCarousel.tsx","actions/homePageActions.ts","actions/offerPageActions.ts","pages/offer/Offer.tsx","pages/home/SearchDrawer.tsx","pages/home/Home.tsx","pages/search/components/OfferTile.tsx","pages/myReservations/components/ReservationTile/ReservationTile.tsx","pages/myReservations/MyReservations.tsx","routes/ProtectedRoute.tsx","routes/PublicRoute.tsx","pages/search/components/CalendarPopover.tsx","components/Drawer/DrawerComponent.tsx","pages/search/components/MoreFilters.tsx","actions/searchPageActions.ts","pages/search/Search.tsx","components/FormSwitch/FormSwitch.tsx","components/OfferForm/OfferForm.tsx","pages/addOffer/AddOffer.tsx","pages/editOffer/EditOffer.tsx","pages/settingsPage/components/UserOfferTile.tsx","pages/settingsPage/Settings.tsx","routes/RoutesConfig.tsx","App.tsx","index.tsx"],"names":["UserActions","TextInput","label","name","placeholder","type","variant","multiline","numberProps","value","useFormContext","register","errors","formState","TextField","fullWidth","color","error","inputProps","helperText","message","defaultValue","initialState","user","authenticated","refreshToken","token","UserContext","createContext","userState","dispatch","authReducer","state","action","payload","logout","localStorage","removeItem","setToken","setRefreshToken","setUser","AuthProvider","children","useReducer","useEffect","getItem","axios","get","process","headers","authorization","then","response","data","access_token","refresh_token","setItem","catch","console","log","Provider","BottomNavbar","useContext","listOfActions","path","icon","useState","setValue","Box","sx","width","BottomNavigation","showLabels","onChange","event","newValue","className","map","BottomNavigationAction","component","Link","to","Navbar","fontSize","PasswordInput","showPassword","setShowPassword","InputProps","endAdornment","InputAdornment","position","IconButton","onClick","style","fill","CustomSelect","menuItems","FormControl","InputLabel","id","Select","labelId","target","menuItem","index","MenuItem","LoadingIndicator","size","CircularProgress","REGEX_PASSWORD","validationCredentials","email","yup","required","password","min","max","matches","signUpSchema","shape","firstName","lastName","password_confirmation","signInSchema","axiosCustom","create","baseURL","interceptors","request","use","req","SearchActions","SignIn","useMutation","a","post","onSuccess","isLoading","mutate","methods","useForm","resolver","yupResolver","onSubmit","handleSubmit","LoadingButton","loading","Button","SignUp","Calendar","startDate","endDate","disabledDates","key","setState","showDateDisplay","item","selection","moveRangeOnFirstSelection","minDate","Date","months","ranges","direction","rangeColors","now","city","people","SearchContext","searchReducer","setCity","setPeople","setStartDate","setEndDate","SearchProvider","OfferReservation","daysCount","dailyPrice","offerId","navigate","useNavigate","fData","FormData","append","moment","format","toString","formatDate","date","Intl","DateTimeFormat","month","day","first","second","difference","Math","abs","getTime","ceil","countDays","AddOpinion","refetchOpinions","offer","React","opinion","content","rate","display","alignItems","Rating","precision","emptyIcon","opacity","Opinion","onDelete","delete","author","OfferOpinions","rateCount","opinionsCount","opinions","offerOwnerId","toFixed","OfferCarousel","images","imageItems","image","src","alt","showArrows","showStatus","dynamicHeight","showThumbs","memo","fetchCities","res","getOfferById","params","withRatings","getOfferOwner","getOfferReservations","getOfferOpinions","Offer","useQuery","isFetching","useParams","isOfferFetching","offerOwner","isOfferOwnerFetching","refetchOnWindowFocus","refetchInterval","offerReservations","enabled","offerOpinions","isOfferOpinionsLoading","opinionsRefetch","refetch","disabledDatesForReservations","reservation","tempDate","reservationDates","push","setDate","getDate","reduce","acc","concat","url","title","Number","ratings","maxPeople","description","SearchDrawer","isError","bgcolor","paddingBottom","List","ListItem","disablePadding","handleClick","ListItemButton","ListItemIcon","ListItemText","primary","Home","visible","setVisible","toggle","Drawer","open","onClose","anchor","OfferTile","ReservationTile","totalPrice","reservationId","today","firstDay","MyReservations","result","userReservations","price","ProtectedRoute","PublicRoute","CalendarPopover","buttonLabel","popoverContent","anchorEl","setAnchorEl","Boolean","undefined","currentTarget","Popover","anchorOrigin","vertical","horizontal","DrawerComponent","drawerIcon","drawerContent","valuetext","MoreFilters","filters","setFilters","prices","setPrice","propertyTypes","property","checked","home","apartment","hotel","hostel","handleChangeCheckbox","Slider","getAriaLabel","activeThumb","Array","isArray","valueLabelDisplay","getAriaValueText","onChangeCommitted","disableSwap","m","startAdornment","FormControlLabel","control","Checkbox","Switch","smoking","fetchOffers","offerParams","Search","filteredOffers","setFilteredOffers","setPrices","loadingCities","cities","length","loadingOffers","offers","fOffers","filter","Autocomplete","newInputValue","disablePortal","options","renderInput","step","actionType","onInputChange","FormSwitch","defaultChecked","OfferForm","submitButtonName","setProperty","AddOffer","files","setFiles","photos","forEach","photo","useDropzone","accept","onDrop","acceptedFiles","addedFiles","file","Object","assign","preview","URL","createObjectURL","getRootProps","getInputProps","thumbs","fileName","revokeObjectURL","maxSizeMB","maxWidthOrHeight","useWebWorker","compressedPhotos","imageCompression","img","Promise","all","offerData","EditOffer","useLocation","put","UserOfferTile","Settings","userOffer","Divider","RoutesConfig","element","queryClient","QueryClient","defaultOptions","queries","App","client","StyledEngineProvider","injectFirst","initialIsOpen","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"2JAIYA,E,iFC4CGC,EAjC6B,SAAC,GAStC,IAAD,EARJC,EAQI,EARJA,MACAC,EAOI,EAPJA,KACAC,EAMI,EANJA,YACAC,EAKI,EALJA,KACAC,EAII,EAJJA,QACAC,EAGI,EAHJA,UACAC,EAEI,EAFJA,YACAC,EACI,EADJA,MAEA,EAGIC,cAFFC,EADF,EACEA,SACYC,EAFd,EAEEC,UAAYD,OAEd,OACE,cAACE,EAAA,EAAD,2BACMH,EAASR,IADf,IAEED,MAAOA,EACPC,KAAMA,EACNC,YAAaA,EACbW,WAAS,EACTV,KAAMA,EACNW,MAAM,UACNV,QAASA,EACTW,QAASL,EAAOT,GAChBI,UAAWA,EACXW,WAAYV,EACZW,WAAYP,EAAOT,GAAP,UAAeS,EAAOT,UAAtB,aAAe,EAAciB,QAAU,GACnDC,aAAcZ,M,gKDvCRT,K,kBAAAA,E,qBAAAA,E,oCAAAA,E,oBAAAA,M,KAYZ,IAAMsB,EAA0B,CAC9BC,KAAM,KACNC,eAAe,EACfC,aAAc,KACdC,MAAO,MAGIC,EAAcC,wBAExB,CACDC,UAAWP,EACXQ,SAAU,kBAAM,QAGZC,EAAc,SAACC,EAAkBC,GACrC,IAAQ5B,EAAkB4B,EAAlB5B,KAAM6B,EAAYD,EAAZC,QAEd,OAAQ7B,GACN,KAAKL,EAAYmC,OAGf,OAFAC,aAAaC,WAAW,sBACxBD,aAAaC,WAAW,uBACjBf,EACT,KAAKtB,EAAYsC,SACf,OAAO,2BACFN,GADL,IAEER,eAAe,EACfE,MAAOQ,IAEX,KAAKlC,EAAYuC,gBACf,OAAO,2BACFP,GADL,IAEEP,aAAcS,IAElB,KAAKlC,EAAYwC,QACf,OAAO,2BACFR,GADL,IAEET,KAAMW,IAEV,QACE,OAAOF,IAQAS,EAAsC,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SAClD,EAA8BC,qBAAWZ,EAAaT,GAAtD,mBAAOO,EAAP,KAAkBC,EAAlB,KAwBA,OAtBAc,qBAAU,WACJR,aAAaS,QAAQ,wBAEvBC,IAAMC,IAAN,UAAaC,oCAAb,uBAAiE,CAC/DC,QAAQ,CACNC,cAAc,UAAD,OAAYd,aAAaS,QAAQ,2BAE/CM,MAAK,SAAAC,GACNtB,EAAS,CAAEzB,KAAML,EAAYsC,SAAUJ,QAASkB,EAASC,KAAKC,eAC9DxB,EAAS,CAAEzB,KAAML,EAAYuC,gBAAiBL,QAASkB,EAASC,KAAKE,gBACrEnB,aAAaoB,QAAQ,qBAAsBJ,EAASC,KAAKC,cACzDlB,aAAaoB,QAAQ,sBAAuBJ,EAASC,KAAKE,eAC1DT,IAAMC,IAAN,UAAaC,oCAAb,SAAmD,CACjDC,QAAS,CACPC,cAAc,UAAD,OAAYE,EAASC,KAAKC,iBAExCH,MAAK,SAAA5B,GACNO,EAAS,CAAEzB,KAAML,EAAYwC,QAASN,QAASX,EAAK8B,UACnDI,OAAM,SAACxC,GAAD,OAAWyC,QAAQC,IAAI1C,SAC/BwC,OAAM,SAACxC,GAAD,OAAWyC,QAAQC,IAAI1C,QAEjC,IAED,cAACU,EAAYiC,SAAb,CAAsBnD,MAAO,CAAEoB,YAAWC,YAA1C,SACGY,K,kBELMmB,EAhEmC,WAEhD,IAAQhC,EAAciC,qBAAWnC,GAAzBE,UACFkC,EAA8B,CAClC,CACE7D,MAAO,WACP8D,KAAM,SACNC,KAAM,cAAC,IAAD,KAER,CACE/D,MAAO,aACP8D,KAAM,iBACNC,KAAM,cAAC,IAAD,KAGRpC,EAAUL,cAAgB,CACxBtB,MAAO,QACP8D,KAAM,WACNC,KAAM,cAAC,IAAD,KACJ,CACJ/D,MAAO,mBACL8D,KAAM,SACNC,KAAM,cAAC,IAAD,KAERpC,EAAUL,cAAgB,CACxBtB,MAAO,aACP8D,KAAM,WACNC,KAAM,cAAC,IAAD,KACH,CACH/D,MAAO,uBACP8D,KAAM,SACNC,KAAM,cAAC,IAAD,MAGV,EAA0BC,mBAAS,UAAnC,mBAAOzD,EAAP,KAAc0D,EAAd,KAOA,OACE,cAACC,EAAA,EAAD,CAAKC,GAAI,CAAEC,MAAO,KAAlB,SACE,cAACC,EAAA,EAAD,CACEC,YAAU,EACV/D,MAAOA,EACPgE,SAXe,SAACC,EAA8BC,GAClDR,EAASQ,IAWLC,UAAU,gBAJZ,SAMGb,EAAcc,KAAI,SAAC5C,GAAD,OACjB,cAAC6C,EAAA,EAAD,CAEE5E,MAAO+B,EAAO/B,MACd+D,KAAMhC,EAAOgC,KACbxD,MAAOwB,EAAO+B,KACde,UAAWC,IACXC,GAAE,WAAMhD,EAAO+B,OALV/B,EAAO+B,c,kBC1CTkB,EAxBuB,WAEpC,OACE,qBAAKN,UAAU,kBAAf,SAUI,sBAAKA,UAAU,kBAAf,UACE,cAAC,IAAD,CAAMK,GAAG,QAAQL,UAAU,gCAA3B,qBAGA,cAAC,IAAD,CAASO,SAAS,gB,sDC+BbC,EA1CqC,SAAC,GAI9C,IAAD,EAHJlF,EAGI,EAHJA,MACAC,EAEI,EAFJA,KACAG,EACI,EADJA,QAEA,EAAwC4D,oBAAS,GAAjD,mBAAOmB,EAAP,KAAqBC,EAArB,KAKA,EAGI5E,cAFFC,EADF,EACEA,SACaC,EAFf,EAEEC,UAAaD,OAEf,OACE,cAACE,EAAA,EAAD,2BACMH,EAASR,IADf,IAEED,MAAOA,EACPC,KAAMA,EACNY,WAAS,EACTV,KAAMgF,EAAe,OAAS,WAC9BrE,MAAM,UACNV,QAASA,EACTW,QAASL,EAAOT,GAChBgB,WAAYP,EAAOT,GAAP,UAAeS,EAAOT,UAAtB,aAAe,EAAciB,QAAU,GACnDmE,WAAY,CACVC,aACE,cAACC,EAAA,EAAD,CAAgBC,SAAS,QAAzB,SACE,cAACC,EAAA,EAAD,CAAYC,QAtBP,WACbN,GAAiBD,IAqBT,SACGA,EACC,cAAC,IAAD,CAAgBQ,MAAO,CAAEC,KAAM,aAE/B,cAAC,IAAD,CAAmBD,MAAO,CAAEC,KAAM,sB,oCCOnCC,EA5BmC,SAAC,GAAsE,IAApE5F,EAAmE,EAAnEA,KAAMM,EAA6D,EAA7DA,MAAO0D,EAAsD,EAAtDA,SAAU7D,EAA4C,EAA5CA,QAASJ,EAAmC,EAAnCA,MAAO8F,EAA4B,EAA5BA,UAAW5F,EAAiB,EAAjBA,YAGnGO,EACED,cADFC,SAKA,OACI,eAACsF,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,CAAYC,GAAG,sBAAf,SAAsCjG,IACtC,cAACkG,EAAA,EAAD,2BACQzF,EAASR,IADjB,IAEIgG,GAAG,gBACHE,QAAQ,sBACR5F,MAAOA,GAAgB,GACvBgE,SAXS,SAACC,GAClBP,EAASO,EAAM4B,OAAO7F,QAWdH,QAASA,EACTJ,MAAOA,EACPE,YAAaA,EARjB,SAWK4F,EAAUnB,KAAI,SAAC0B,EAAUC,GAAX,OAAsB,cAACC,EAAA,EAAD,CAAsBhG,MAAO8F,EAAS9F,MAAtC,SAA8C8F,EAASrG,OAAxCsG,a,SChCrDE,EAN2C,SAAC,GAAY,IAAXC,EAAU,EAAVA,KAC1D,OAAQ,qBAAK/B,UAAU,oBAAf,SACN,cAACgC,EAAA,EAAD,CAAkBD,KAAMA,O,0DCPtBE,GACJ,yEAEIC,GAAwB,CAC5BC,MAAOC,OAAaD,MAAM,kBAAaE,SAAS,uBAChDC,SAAUF,OAEPC,SAAS,4BACTE,IAAI,EAAG,iCACPC,IAAI,GAAI,kCACRC,QAAQR,GAAgB,kIAGhBS,GAAeN,OAAaO,MAAb,2BACvBT,IADuB,IAE1BU,UAAWR,OAERC,SAAS,2BACTE,IAAI,EAAG,gCACPC,IAAI,GAAI,iCACXK,SAAUT,OAEPC,SAAS,0BACTE,IAAI,EAAG,+BACPC,IAAI,GAAI,gCACXM,sBAAuBV,OAEpBC,SAAS,4CACTE,IAAI,EAAG,iCACPC,IAAI,GAAI,kCACRC,QAAQR,GAAgB,oIAGhBc,GAAeX,OAAaO,MAAMT,I,SC/BzCc,GAAc9E,IAAM+E,OAAO,CAC7BC,QAHY9E,sCAMhB4E,GAAYG,aAAaC,QAAQC,KAAI,SAAUC,GAE3C,OADAA,EAAIjF,QAASC,cAAb,iBAAuCd,aAAaS,QAAQ,uBACrDqF,KAWIN,ICnBHO,GDmBGP,M,UEJFQ,GAAgC,WAC3C,IAAQtG,EAAagC,qBAAWnC,GAAxBG,SACR,EAAoCuG,uBAAW,yCAAC,WAAO9G,GAAP,gBAAA+G,EAAA,sEACvBxF,GAAMyF,KAAK,eAAgBhH,GADJ,cACxC6B,EADwC,yBAEvCA,GAFuC,2CAAD,sDAG5C,CACDoF,UAAW,SAACnF,GACVvB,EAAS,CAAEzB,KAAML,EAAYsC,SAAUJ,QAASmB,EAAKA,KAAKC,eAC1DxB,EAAS,CAAEzB,KAAML,EAAYuC,gBAAiBL,QAASmB,EAAKA,KAAKE,gBACjEnB,aAAaoB,QAAQ,qBAAsBH,EAAKA,KAAKC,cACrDlB,aAAaoB,QAAQ,sBAAuBH,EAAKA,KAAKE,eACtDT,GAAMC,IAAN,UAAaC,oCAAb,SAAmD,CACjDC,QAAS,CACPC,cAAc,UAAD,OAAYG,EAAKA,KAAKC,iBAEpCH,MAAK,SAAA5B,GACNO,EAAS,CAAEzB,KAAML,EAAYwC,QAASN,QAASX,EAAK8B,UACnDI,OAAM,SAACxC,GAAD,OAAWyC,QAAQC,IAAI1C,SAftBwH,GAAd,EAAQpF,KAAR,EAAcoF,WAAWC,EAAzB,EAAyBA,OAoBnBC,EAAUC,YAAoB,CAClCC,SAAUC,aAAYnB,MAQxB,OACE,uBAAM/C,UAAU,OAAhB,UACE,qBAAKA,UAAU,eAAf,SACE,oDAGF,eAAC,IAAD,2BAAkB+D,GAAlB,cACE,uBACEI,SAAUJ,EAAQK,cAZT,SAAC3F,GAChBqF,EAAOrF,MAYDuB,UAAU,iCAFZ,UAIE,cAAC,EAAD,CACE1E,MAAM,QACNC,KAAK,QACLC,YAAY,kBACZC,KAAK,QACLC,QAAQ,aAEV,cAAC,EAAD,CAAeJ,MAAM,aAAQC,KAAK,WAAWG,QAAQ,aAEpDmI,EAAY,cAACQ,GAAA,EAAD,CAAeC,SAAO,EAAC5I,QAAQ,YAA/B,oBAEM,cAAC6I,GAAA,EAAD,CAAQ9I,KAAK,SAASC,QAAQ,YAA9B,iCAIrB,sBAAKsE,UAAU,eAAf,UACE,iDACA,cAAC,IAAD,CAAMK,GAAG,UAAT,6CC1DGmE,GAAgC,WAC3C,IAAQtH,EAAagC,qBAAWnC,GAAxBG,SACR,EAA8BuG,uBAAW,yCAAC,WAAO9G,GAAP,gBAAA+G,EAAA,sEACjBxF,GAAMyF,KAAK,kBAAmBhH,GADb,cAClC6B,EADkC,OAExCM,QAAQC,IAAIP,GAF4B,kBAGjCA,GAHiC,2CAAD,sDAItC,CACDoF,UAAW,SAACnF,GACVvB,EAAS,CAAEzB,KAAML,EAAYsC,SAAUJ,QAASmB,EAAKA,KAAKC,eAC1DxB,EAAS,CAAEzB,KAAML,EAAYuC,gBAAiBL,QAASmB,EAAKA,KAAKE,gBACjEnB,aAAaoB,QAAQ,qBAAsBH,EAAKA,KAAKC,cACrDlB,aAAaoB,QAAQ,sBAAuBH,EAAKA,KAAKE,eACtDT,GAAMC,IAAN,UAAaC,oCAAb,SAAmD,CACjDC,QAAS,CACPC,cAAc,UAAD,OAAYG,EAAKA,KAAKC,iBAEpCH,MAAK,SAAA5B,GACNO,EAAS,CAAEzB,KAAML,EAAYwC,QAASN,QAASX,EAAK8B,UACnDI,OAAM,SAACxC,GAAD,OAAWyC,QAAQC,IAAI1C,SAhB5BwH,EAAR,EAAQA,UAAWC,EAAnB,EAAmBA,OAmBbC,EAAUC,YAAoB,CAClCC,SAAUC,aAAYxB,MAMxB,OACE,uBAAM1C,UAAU,OAAhB,UACE,qBAAKA,UAAU,eAAf,SACE,wDAGF,cAAC,IAAD,2BAAkB+D,GAAlB,aACE,uBACEI,SAAUJ,EAAQK,cAXT,SAAC3F,GAChBqF,EAAOrF,MAWDuB,UAAU,iCAFZ,UAIE,cAAC,EAAD,CACE1E,MAAM,YACNC,KAAK,YACLC,YAAY,YACZC,KAAK,OACLC,QAAQ,aAEV,cAAC,EAAD,CACEJ,MAAM,WACNC,KAAK,WACLC,YAAY,WACZC,KAAK,OACLC,QAAQ,aAEV,cAAC,EAAD,CACEJ,MAAM,QACNC,KAAK,QACLC,YAAY,kBACZC,KAAK,QACLC,QAAQ,aAEV,cAAC,EAAD,CAAeJ,MAAM,WAAWC,KAAK,WAAWG,QAAQ,aACxD,cAAC,EAAD,CACEJ,MAAM,mBACNC,KAAK,wBACLG,QAAQ,aAGTmI,EAAY,cAACQ,GAAA,EAAD,CAAeC,SAAO,EAAC5I,QAAQ,YAA/B,oBAEK,cAAC6I,GAAA,EAAD,CAAQ9I,KAAK,SAASC,QAAQ,YAA9B,wCAMtB,uBAAMsE,UAAU,eAAhB,UACE,sDACA,cAAC,IAAD,CAAMK,GAAG,UAAUL,UAAU,wBAA7B,qC,oFC7EKyE,GAAoC,SAAC,GAAmD,IAAlDC,EAAiD,EAAjDA,UAAWC,EAAsC,EAAtCA,QAASC,EAA6B,EAA7BA,cAAe/E,EAAc,EAAdA,SAClF,EAA0BP,mBAA4B,CAClD,CACIoF,UAAWA,EACXC,QAASA,EACTE,IAAK,eAJb,mBAAOzH,EAAP,KAAc0H,EAAd,KAiBA,OAAQ,cAAC,aAAD,CACJ9E,UAAU,WACV+E,iBAAiB,EACjBlF,SAZiB,SAACmF,GAClBA,EAAKC,UAAUP,WAAaM,EAAKC,UAAUN,SACvC9E,EAASmF,EAAKC,UAAUP,UAAWM,EAAKC,UAAUN,SAGtDG,EAAS,CAACE,EAAKC,aAQfC,2BAA2B,EAC3BC,QAAS,IAAIC,KACbC,OAAQ,EACRC,OAAQlI,EACRmI,UAAU,aACVC,YAAa,CAAC,aACdZ,cAAeA,M,SH5CXrB,K,8BAAAA,E,0BAAAA,E,mBAAAA,E,wBAAAA,Q,KAmBZ,IAAM7G,GAAuB,CAC3BgI,UAAW,IAAIU,KACfT,QAAS,IAAIS,KAAKA,KAAKK,MAAQ,OAC/BC,KAAM,GACNC,OAAQ,GAGGC,GAAgB5I,wBAAqE,CAChGI,MAAOV,GACPQ,SAAU,kBAAM,QAKZ2I,GAAgB,SAACzI,EAAeC,GACpC,IAAQ5B,EAAkB4B,EAAlB5B,KAAM6B,EAAYD,EAAZC,QAEd,OAAQ7B,GACN,KAAK8H,GAAcuC,QACjB,OAAO,2BACF1I,GADL,IAEEsI,KAAMpI,IAEV,KAAKiG,GAAcwC,UACjB,OAAO,2BACF3I,GADL,IAEEuI,OAAQrI,IAEZ,KAAKiG,GAAcyC,aACjB,OAAO,2BACF5I,GADL,IAEEsH,UAAWpH,IAEf,KAAKiG,GAAc0C,WACjB,OAAO,2BACF7I,GADL,IAEEuH,QAASrH,IAEb,QACE,OAAOF,IAUA8I,GAA+C,SAAC,GAAkB,IAAhBpI,EAAe,EAAfA,SAC7D,EAA0BC,qBAAW8H,GAAenJ,IAApD,mBAAOU,EAAP,KAAcF,EAAd,KACA,OACE,cAAC0I,GAAc5G,SAAf,CAAwBnD,MAAO,CAAEuB,QAAOF,YAAxC,SACGY,K,oBI1DMqI,GAAoD,SAAC,GAA2B,IA2B9DC,EA3BoCC,EAAyB,EAAzBA,WAAYC,EAAa,EAAbA,QACtElJ,EAAS8B,qBAAW0G,IAApBxI,MACAsH,EAAsBtH,EAAtBsH,UAAWC,EAAWvH,EAAXuH,QACZ4B,EAAWC,eACjB,EAA8B/C,uBAAW,wBAAC,+BAAAC,EAAA,6DAClC+C,EAAQ,IAAIC,UACZC,OAAO,YAAaC,KAAOxJ,EAAMsH,WAAWmC,OAAO,eACzDJ,EAAME,OAAO,UAAWC,KAAOxJ,EAAMuH,SAASkC,OAAO,eACrDJ,EAAME,OAAO,QAASL,EAAQQ,YAJU,SAKjB5I,GAAMyF,KAAK,gBAAiB8C,GALX,cAKlCjI,EALkC,yBAMjCA,GANiC,2CAOvC,CACDoF,UAAW,WACT2C,EAAS,sBATL1C,EAAR,EAAQA,UAAWC,EAAnB,EAAmBA,OA2BbiD,EAAa,SAACC,GAKlB,OAAO,IAAIC,KAAKC,eAAe,QAJa,CAC1CC,MAAO,QAASC,IAAK,YAG0BP,OAAO,IAAIzB,KAAK4B,KAGnE,OACE,sBAAKhH,UAAU,cAAf,UACE,gCACI,oBAAIA,UAAU,qBAAd,sBACA,8BAAIqG,EAAJ,mBACA,4BAAG,8BAAIU,EAAWrC,GAAf,WAA8BqC,EAAWpC,WAEhD,sBAAM3E,UAAU,qBAAhB,UACI,oDAAY,+BApBSoG,EANX,SAACiB,EAAaC,GAC9B,IAAMC,EAAaC,KAAKC,IAAIJ,EAAMK,UAAYJ,EAAOI,WAErD,OADkBF,KAAKG,KAAKJ,EAAU,MAAwB,GAwBpBK,CAAUlD,EAAWC,GAnBxD0B,EAAWD,GAmBA,gBACbvC,EACG,cAACQ,GAAA,EAAD,CAAeC,SAAO,EAAC5I,QAAQ,YAA/B,sBACA,cAAC6I,GAAA,EAAD,CAAQvD,QAAS,kBAAM8C,KAAvB,6B,UClDC+D,GAAwC,SAAC,GAA8B,IAA7BC,EAA4B,EAA5BA,gBAAiBC,EAAW,EAAXA,MACtE,EAA0BC,IAAM1I,SAAiB,GAAjD,mBAAOzD,EAAP,KAAc0D,EAAd,KACA,EAA8BkE,uBAAW,yCAAC,WAAOwE,GAAP,kBAAAvE,EAAA,6DAClC+C,EAAQ,IAAIC,UACZC,OAAO,UAAWsB,EAAQC,QAAQpB,YACxCL,EAAME,OAAO,OAAQsB,EAAQE,KAAKrB,YAClCL,EAAME,OAAO,QAASsB,EAAQF,MAAMjB,YAJI,SAMjB5I,GAAMyF,KAAK,YAAa8C,GANP,cAMlCjI,EANkC,OAOxCM,QAAQC,IAAIP,GAP4B,kBAQjCA,GARiC,2CAAD,sDAStC,CACDoF,UAAW,WACTkE,OAXehE,GAAnB,EAAQD,UAAR,EAAmBC,QAebC,EAAUC,cAYhB,OAAQ,kCACN,cAAC,IAAD,2BAAkBD,GAAlB,aACE,uBAAMI,SAAUJ,EAAQK,cAZX,SAAC3F,GAChB,IAAMwJ,EAAuB,CAC3BC,QAASzJ,EAAKwJ,QACdE,KAAMtM,EACNkM,MAAOA,EAAMxG,IAGfuC,EAAOmE,MAK4CjI,UAAU,mBAA3D,UACE,sBAAKA,UAAU,iBAAf,UACE,iEACA,cAACR,EAAA,EAAD,CACEC,GAAI,CACF2I,QAAS,OACTC,WAAY,UAHhB,SAME,cAACC,GAAA,EAAD,CACE/M,KAAK,iBACLM,MAAOA,EACP0M,UAAW,EACX1I,SAAU,SAACC,EAAOC,GAChBR,EAASQ,IAEXyI,UAAW,cAAC,KAAD,CAAUvH,MAAO,CAAEwH,QAAS,KAAQlI,SAAS,mBAI9D,cAAC,EAAD,CAAWjF,MAAM,oBAAeC,KAAK,UAAUC,YAAY,4BAAuBC,KAAK,OAAOC,QAAQ,WAAWC,WAAW,IAC5H,cAAC4I,GAAA,EAAD,CAAQ9I,KAAK,SAAb,4BCvDKiN,GAAkC,SAAC,GAAyB,IAAD,EAAvBT,EAAuB,EAAvBA,QAASU,EAAc,EAAdA,SAChD1L,EAAciC,qBAAWnC,GAAzBE,UACA6G,EAAWL,uBAAW,wBAAC,uBAAAC,EAAA,sEAChBxF,GAAM0K,OAAN,mBAAyBX,EAAQ1G,KADjB,mFAE5B,CACDqC,UAAW,WACT+E,OAJI7E,OAOR,OAAQ,sBAAK9D,UAAU,UAAf,UACN,sBAAKA,UAAU,kBAAf,UACE,gCACE,4BAAIiI,EAAQY,OAAOjG,YACnB,mBAAG5C,UAAU,qBAAb,SAAmCiI,EAAQjB,UAE7C,sBAAKhH,UAAU,kBAAf,UAAkCiI,EAAQE,KAA1C,MAAkD,cAAC,KAAD,UAEpD,mBAAGnI,UAAU,mBAAb,SACGiI,EAAQC,WAEV,UAAAjL,EAAUN,YAAV,eAAgB4E,MAAO0G,EAAQY,OAAOtH,IACrC,mBAAGP,QAAS,kBAAM8C,KAAU9D,UAAU,0BAAtC,2BClBO8I,GAA8C,SAAC,GAAgF,IAAD,IAA9EC,EAA8E,EAA9EA,UAAWC,EAAmE,EAAnEA,cAAeC,EAAoD,EAApDA,SAAUnB,EAA0C,EAA1CA,gBAAiBC,EAAyB,EAAzBA,MAAOmB,EAAkB,EAAlBA,aAC/GjM,EAAciC,qBAAWnC,GAAzBE,UAIR,OAHF6B,QAAQC,IAAImK,GACVpK,QAAQC,IAAR,UAAY9B,EAAUN,YAAtB,aAAY,EAAgB4E,IAEpB,oCACL2H,KAAY,UAAKjM,EAAUN,YAAf,aAAK,EAAgB4E,KAAM,cAAC,GAAD,CAAYuG,gBAAiBA,EAAiBC,MAAOA,IACzF,sBAAK/H,UAAU,iBAAf,UACI,yCACA,uBAAMA,UAAU,iBAAhB,UACY,cAAC,KAAD,IACA,4BAAI+I,EAAUI,QAAQ,KACtB,oBAAGnJ,UAAU,wBAAb,wCAAuDgJ,EAAvD,aAIZC,EAAShJ,KAAI,SAACgI,GAAD,OACX,cAAC,GAAD,CAASA,QAASA,EAASU,SAAUb,GAAsBG,EAAQ1G,W,UCvB3E6H,GAA8C,SAAC,GAAc,IAAbC,EAAY,EAAZA,OAC5CC,EAAU,OAAGD,QAAH,IAAGA,OAAH,EAAGA,EAAQpJ,KAAI,SAACsJ,EAAO1E,GAAR,OAC3B,qBAAiB2E,IAAKD,EAAOE,IAAG,sBAAY5E,IAAlC0E,MAGd,OACI,cAAC,YAAD,CAAUvJ,UAAU,iBAAiB0J,YAAU,EAACC,YAAY,EAAOC,eAAe,EAAMC,YAAY,EAApG,SACKP,KAKEQ,kBAAKV,ICpBPW,GAAW,yCAAG,6BAAArG,EAAA,sEACLxF,GAAM,YADD,cACjB8L,EADiB,yBAGhBA,GAHgB,2CAAH,qDCAXC,GAAY,yCAAG,WAAO1I,GAAP,gBAAAmC,EAAA,sEACPxF,GAAMC,IAAN,kBAAqBoD,GAAM,CAC5C2I,OAAQ,CACNC,aAAa,KAHS,cACpB1L,EADoB,gBAMbA,EAAKA,KANQ,mFAAH,sDASZ2L,GAAa,yCAAG,WAAO7I,GAAP,gBAAAmC,EAAA,sEACRxF,GAAMC,IAAN,kBAAqBoD,EAArB,WADQ,cACrB9C,EADqB,gBAEdA,EAAKA,KAFS,mFAAH,sDAKb4L,GAAoB,yCAAG,WAAO9I,GAAP,gBAAAmC,EAAA,sEACfxF,GAAMC,IAAN,kBAAqBoD,EAArB,kBADe,cAC5B9C,EAD4B,gBAErBA,EAAKA,KAFgB,mFAAH,sDAKpB6L,GAAgB,yCAAG,WAAO/I,GAAP,gBAAAmC,EAAA,sEACXxF,GAAMC,IAAN,kBAAqBoD,EAArB,cADW,cACxB9C,EADwB,gBAEjBA,EAAKA,KAFY,mFAAH,sDC6Hd8L,GA3HqB,WAAO,IAAD,EACxC,EAA8CC,oBAAS,SAAUT,IAC3DxD,GADN,EAAQkE,WAAR,EAAoBhM,KAApB,EAAoCpC,MACnBmK,gBACTjF,EAAOmJ,eAAPnJ,GACR,EAA4BrC,qBAAW0G,IAA/BxI,EAAR,EAAQA,MAAOF,EAAf,EAAeA,SACPD,EAAciC,qBAAWnC,GAAzBE,UAGR,EAGgCuN,oBAAS,CAAC,QAASjJ,IAAK,kBAAM0I,GAAa1I,MAFnEwG,EADR,EACEtJ,KACYkM,EAFd,EAEEF,WAGF,EACED,oBAAS,CAAC,aAAcjJ,IAAK,kBAAM6I,GAAc7I,MADrCqJ,EAAd,EAAQnM,KAA8BoM,EAAtC,EAA0BJ,WAG1B,EACED,oBAAwB,CAAC,oBAAqBjJ,IAAK,kBAAM8I,GAAqB9I,KAAM,CAClFuJ,sBAAsB,EACtBC,gBAAiB,MAHPC,EAAd,EAAQvM,KAMR,GANA,EAAiCgM,WAW/BD,oBAAS,CAAC,gBAAiBjJ,IAAK,kBAAM+I,GAAiB/I,KAAM,CAAE0J,SAAS,KAJlEC,EADR,EACEzM,KACY0M,EAFd,EAEEV,WACSW,EAHX,EAGEC,QAUIC,EAA4B,OAAGN,QAAH,IAAGA,OAAH,EAAGA,EAAmB/K,KAAI,SAAAsL,GAC1D,IAAM7G,EAAY,IAAIU,KAAKmG,EAAY7G,WACjCC,EAAU,IAAIS,KAAKmG,EAAY5G,SACjC6G,EAAW,IAAIpG,KAAKV,EAAUgD,WAC5B+D,EAAmB,GAEzB,IADAA,EAAiBC,KAAKhH,GACf8G,EAAS9D,UAAY/C,EAAQ+C,WAClC8D,EAASG,QAAQH,EAASI,UAAY,GACtCH,EAAiBC,KAAK,IAAItG,KAAKoG,IAEjC,OAAOC,KAGH7G,EAAa,OAAG0G,QAAH,IAAGA,OAAH,EAAGA,EAA8BO,QAAO,SAACC,EAAK9E,GAC/D,OAAO8E,EAAIC,OAAO/E,KACjB,IAEH,OAAI2D,GAAmBE,EACd,cAAC,EAAD,IAGP,uBAAM7K,UAAU,QAAhB,UACE,sBAAKA,UAAU,aAAf,UACE,cAAC,KAAD,CAAiBgB,QAAS,kBAAMuF,GAAU,OAEzC,UAAAtJ,EAAUN,YAAV,eAAgB4E,OAAhB,OAAuBqJ,QAAvB,IAAuBA,OAAvB,EAAuBA,EAAYrJ,KAAM,cAAC,IAAD,CAAMlB,GAAG,aAAajD,MAAO,CAAEmE,GAAE,OAAEwG,QAAF,IAAEA,OAAF,EAAEA,EAAOxG,IAA1C,uBAG5C,cAAC,GAAD,CAAe8H,OAAM,OAAEtB,QAAF,IAAEA,OAAF,EAAEA,EAAOsB,OAAOpJ,KAAI,SAAAsJ,GAAK,OAAIA,EAAMyC,SAExD,0BAAShM,UAAU,iBAAnB,UACE,oBAAIA,UAAU,eAAd,gBACG+H,QADH,IACGA,OADH,EACGA,EAAOkE,QAGV,0BAASjM,UAAU,cAAnB,UACY,uBAAMA,UAAU,iBAAhB,UACI,cAAC,KAAD,IACA,4BAAIkM,OAAM,OAACnE,QAAD,IAACA,OAAD,EAACA,EAAOoE,QAAQpD,WAAWI,QAAQ,KAC7C,oBAAGnJ,UAAU,wBAAb,+CAAuD+H,QAAvD,IAAuDA,OAAvD,EAAuDA,EAAOoE,QAAQnD,cAAtE,UAEd,mBAAGhJ,UAAU,wBAAb,gBAAsC+H,QAAtC,IAAsCA,OAAtC,EAAsCA,EAAOrC,UAG/C,qBAAK1F,UAAU,mBAEf,yBAASA,UAAU,cAAnB,SACE,sBAAKA,UAAU,mBAAf,UACE,gDACA,oEAAiB+H,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAOqE,aACxB,mDAAexB,QAAf,IAAeA,OAAf,EAAeA,EAAYhI,aAC3B,+CAAWgI,QAAX,IAAWA,OAAX,EAAWA,EAAYzI,cAI3B,qBAAKnC,UAAU,mBACf,yBAASA,UAAU,qBAAnB,SACE,mCAAI+H,QAAJ,IAAIA,OAAJ,EAAIA,EAAOsE,gBAEb,qBAAKrM,UAAU,mBACf,0BAASA,UAAU,qBAAnB,UACE,cAAC,GAAD,CAAU0E,UAAWtH,EAAMsH,UAAWC,QAASvH,EAAMuH,QAAS9E,SAlErD,SAAC6E,EAAiBC,GACjCzH,EAAS,CAAEzB,KAAM8H,GAAcyC,aAAc1I,QAASoH,IACtDxH,EAAS,CAAEzB,KAAM8H,GAAc0C,WAAY3I,QAASqH,KAiEpCC,cAAeA,IACzB,cAAC,GAAD,CAAkByB,WAAY0B,EAAO1B,WAAYC,QAASyB,EAAOxG,QAGnE,qBAAKvB,UAAU,mBACbkL,GAAkBC,EAIhBA,EACE,cAAC,EAAD,IACA,yBAASnL,UAAU,kBAAnB,SACA,cAAC,GAAD,CAAe+I,UAAWmD,OAAM,OAACnE,QAAD,IAACA,OAAD,EAACA,EAAOoE,QAAQpD,WACjCC,cAAekD,OAAM,OAACnE,QAAD,IAACA,OAAD,EAACA,EAAOoE,QAAQnD,eACrCC,SAAUiC,EACVnD,MAAOA,EACPD,gBAAiBsD,EACjBlC,aAAc0B,EAAYrJ,OAX3C,qBAAKvB,UAAU,+BAAf,SACA,cAACuE,GAAA,EAAD,CAAQvE,UAAU,gCAAgCgB,QAAS,kBAAMoK,KAAjE,0C,0FC1GCkB,GAA4C,SAAC,GAAQ,gBAChE,MAA8C9B,oBAAS,SAAUT,IAAzDlG,EAAR,EAAQA,UAAWpF,EAAnB,EAAmBA,KAAM8N,EAAzB,EAAyBA,QAASlB,EAAlC,EAAkCA,QAClC,EAA4BnM,qBAAW0G,IAAxB1I,GAAf,EAAQE,MAAR,EAAeF,UAQf,OACE,oCACE,sBAAK8C,UAAU,gBAAf,UACE,gCACE,cAACe,EAAA,EAAD,CAAY,aAAW,SAAvB,SACE,cAAC,KAAD,MAGF,uBACEtF,KAAK,OACLuE,UAAU,uBACVxE,YAAY,wCAGhB,yEAGF,cAACgE,EAAA,EAAD,CACEC,GAAI,CACFC,MAAO,OACP8M,QAAS,mBACTC,cAAe,QAJnB,SAOE,sBAAK,aAAW,uBAAhB,UAGG5I,EAAY,cAAC,EAAD,IACX,cAAC6I,GAAA,EAAD,UACGjO,GAAQA,EAAKA,KAAKwB,KAAI,SAACyF,GAAD,OACrB,cAACiH,GAAA,EAAD,CAAUC,gBAAc,EAAYvM,GAAE,UAAaF,UAAWC,IAAMY,QAAS,kBApCvE,SAAC0E,GAEnB5G,QAAQC,IAAIwE,GAAcuC,SAC1B5I,EAAS,CAAEzB,KAAM8H,GAAcuC,QAASxI,QAASoI,IAiC8CmH,CAAYnH,IAA/F,SACE,eAACoH,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,UACE,cAAC,KAAD,MAEF,cAACC,GAAA,EAAD,CAAcC,QAASvH,QALGA,QAalC6G,GAAW,qBAAKvM,UAAU,iCAAf,SACT,cAACuE,GAAA,EAAD,CAAQvE,UAAU,gCAAgCgB,QAAS,kBAAMqK,KAAjE,8CCjED6B,GAA4B,WAEvC,IAAQjQ,EAAciC,qBAAWnC,GAAzBE,UACR,EAA8BqC,oBAAS,GAAvC,mBAAO6N,EAAP,KAAgBC,EAAhB,KACMC,EAAS,WACbD,GAAYD,IAGR5G,EAAWC,eAEjB,OACE,iCACE,sBAAKxG,UAAU,OAAf,UACE,mFACA,yBAAQgB,QAAU,kBAAM/D,EAAUL,cAAgByQ,IAAW9G,EAAS,YAAYvG,UAAU,eAA5F,UACE,cAAC,IAAD,CAAYO,SAAS,SAASP,UAAU,sBAD1C,yCAMF,cAACsN,GAAA,EAAD,CAAQC,KAAMJ,EAASK,QAASH,EAAQI,OAAO,MAA/C,SACE,cAAC,GAAD,U,qBCtBKC,GAAsC,SAAC,GAAa,IAAD,EAAX3F,EAAW,EAAXA,MACjD,OACI,cAAC,IAAD,CAAM1H,GAAE,iBAAY0H,EAAMxG,IAA1B,SAEI,sBAAKvB,UAAU,aAAf,UACI,6BAAK+H,EAAMkE,QACX,sBAAKjM,UAAU,oBAAf,UACI,qBAAKwJ,IAAG,UAAEzB,EAAMsB,OAAO,UAAf,aAAE,EAAiB2C,IAAKvC,IAAI,YACpC,cAAC,KAAD,CAAqBzJ,UAAU,wBAGnC,sBAAKA,UAAU,0BAAf,UAEI,8BAAG,6CAAH,IAAwB+H,EAAMrC,QAC9B,4BAAIqC,EAAMsE,cACV,oBAAGrM,UAAU,yCAAb,UAAsD,mCAAS+H,EAAM1B,WAAf,cAAtD,qBCVPsH,GAAkD,SAAC,GAAgE,IAA9DC,EAA6D,EAA7DA,WAAYlJ,EAAiD,EAAjDA,UAAWC,EAAsC,EAAtCA,QAASkJ,EAA6B,EAA7BA,cAAelF,EAAc,EAAdA,SAC/G,EAA6BlF,uBAAW,wBAAC,uBAAAC,EAAA,sEAC1BxF,GAAM0K,OAAN,uBAA6BiF,IADH,mFAEtC,CACDjK,UAAW,WACT+E,OAJI7E,EAAR,EAAQA,OAAQD,EAAhB,EAAgBA,UAOViK,EAAQ,IAAI1I,KACZ2I,EAAW,IAAI3I,KAAKV,GAC1B,OAAQ,sBAAK1E,UAAU,oCAAf,UACN,gCACE,sBAAKA,UAAU,8BAAf,6CAAmE,mCAAS4N,EAAT,iBACnE,iDAAoBlJ,KACpB,qDAAmBC,QAGpBd,EACG,cAACQ,GAAA,EAAD,CAAeC,SAAO,EAAC5I,QAAQ,YAA/B,sBACAoS,EAAQC,GAAY,cAACxJ,GAAA,EAAD,CAAQvD,QAAS,kBAAM8C,KAAvB,wCClBfkK,GAAgD,SAAC,GAAQ,gBACpE,IAAQ/Q,EAAciC,qBAAWnC,GAAzBE,UAER,EAAwDuN,oBAAS,iBAAD,wBAAmB,6BAAA9G,EAAA,sEAC5DxF,GAAMC,IAAN,sBAD4D,cAC3E8P,EAD2E,yBAE1EA,GAF0E,4CAA3ExD,EAAR,EAAQA,WAAkByD,EAA1B,EAAoBzP,KAAwB4M,EAA5C,EAA4CA,QAM5C,OAAIpO,EAAUL,cAEV,sBAAMoD,UAAU,kBAAhB,SACGyK,EACG,cAAC,EAAD,IACA,0BAASzK,UAAU,2BAAnB,UACA,iDACA,qCACGkO,QADH,IACGA,OADH,EACGA,EAAkBzP,KAAKwB,KAAI,SAACsL,GAAD,OAC1B,gCACE,cAAC,GAAD,CAAWxD,MAAOwD,EAAYxD,QAC9B,cAAC,GAAD,CAAiB6F,WAAYrC,EAAY4C,MAAOzJ,UAAW6G,EAAY7G,UACtDC,QAAS4G,EAAY5G,QAASkJ,cAAetC,EAAYhK,GAAIoH,SAAU0C,MAHhFE,EAAYhK,cAalC,cAAC,GAAD,KCtCS6M,GAAgD,SAAC,GAAkB,IAAhBtQ,EAAe,EAAfA,SAG9D,OAFoBoB,qBAAWnC,GAAxBE,UAEOL,cACLkB,EAGF,cAAC,KAAD,CAAUuC,GAAG,aCPTgO,GAA0C,SAAC,GAAkB,IAAhBvQ,EAAe,EAAfA,SAGxD,OAFsBoB,qBAAWnC,GAAzBE,UAEML,cACL,cAAC,KAAD,CAAUyD,GAAG,UAEfvC,G,mBCHIwQ,GAAkD,SAAC,GAAmC,IAAlCC,EAAiC,EAAjCA,YAAaC,EAAoB,EAApBA,eAC1E,EAAgCxG,IAAM1I,SAAmC,MAAzE,mBAAOmP,EAAP,KAAiBC,EAAjB,KACMnB,EAAOoB,QAAQF,GACflN,EAAKgM,EAAO,sBAAmBqB,EAUrC,OACI,qCACI,cAACrK,GAAA,EAAD,CAAQ,mBAAkBhD,EAAI7F,QAAQ,YAAYsF,QAVtC,SAAClB,GACjB4O,EAAY5O,EAAM+O,gBASd,SACKN,IAEL,cAACO,GAAA,EAAD,CACIvN,GAAIA,EACJgM,KAAMA,EACNkB,SAAUA,EACVjB,QAbQ,WAChBkB,EAAY,OAaJK,aAAc,CACVC,SAAU,SACVC,WAAY,UAPpB,SAWGT,Q,+BC5BFU,GAAkD,SAAC,GAAmE,IAAlEC,EAAiE,EAAjEA,WAAYZ,EAAqD,EAArDA,YAAaa,EAAwC,EAAxCA,cAAejC,EAAyB,EAAzBA,QAASC,EAAgB,EAAhBA,WACxGC,EAAS,WACXD,GAAYD,IAEhB,OACI,gCACKoB,GAAe,wBAAQvN,QAASqM,EAAjB,SACXkB,IAEJY,GAAc,qBAAKnO,QAASqM,EAAd,SAAuB8B,IACtC,cAAC7B,GAAA,EAAD,CAAQC,KAAMJ,EAASK,QAASH,EAAQI,OAAO,MAA/C,SACK2B,Q,0FCAjB,SAASC,GAAUxT,GACf,MAAM,GAAN,OAAUA,EAAV,MAGJ,IAGayT,GAAoC,SAAC,GAAwD,IAAvDlC,EAAsD,EAAtDA,WAAYD,EAA0C,EAA1CA,QAASoC,EAAiC,EAAjCA,QAASC,EAAwB,EAAxBA,WAAYC,EAAY,EAAZA,OACzF,EAA0BnQ,mBAAmBiQ,EAAQpB,OAArD,mBAAOA,EAAP,KAAcuB,EAAd,KAEMC,EAAgB,CAClB,CACIrU,MAAO,MACPsU,SAAU,OACVC,QAASN,EAAQO,MAErB,CACIxU,MAAO,aACPsU,SAAU,YACVC,QAASN,EAAQQ,WAErB,CACIzU,MAAO,QACPsU,SAAU,QACVC,QAASN,EAAQS,OAErB,CACI1U,MAAO,SACPsU,SAAU,SACVC,QAASN,EAAQU,SAqBnBC,EAAuB,SAACpQ,GAC1B0P,EAAW,2BACJD,GADG,mBAELzP,EAAM4B,OAAOnG,KAAQuE,EAAM4B,OAAOmO,WAEvC/Q,QAAQC,IAAR,2BACOwQ,GADP,mBAEKzP,EAAM4B,OAAOnG,KAAQuE,EAAM4B,OAAOmO,YAK3C,OAAQ,sBAAK7P,UAAU,eAAf,UACA,sBAAKA,UAAU,uBAAf,UACI,cAACe,EAAA,EAAD,CAAYC,QAAS,kBAAMoM,GAAYD,IAAvC,SACI,cAAC,KAAD,MAEJ,wDACA,2BAER,sBAAKnN,UAAU,0BAAf,UAEI,sBAAKA,UAAU,sBAAf,UACI,6CAIA,cAACmQ,GAAA,EAAD,CACIC,aAAc,iBAAM,oBACpBvU,MAAOsS,EACPtO,SAhDM,SAClBC,EACAC,EACAsQ,GAEKC,MAAMC,QAAQxQ,IAGC2P,EAAJ,IAAhBW,EAA6B,CAAC7I,KAAKjF,IAAIxC,EAAS,GAAIoO,EAAM,GApC9C,IAoCiEA,EAAM,IAAgB,CAACA,EAAM,GAAI3G,KAAKhF,IAAIzC,EAAS,GAAIoO,EAAM,GApC9H,OA6EAqC,kBAAkB,OAClBC,iBAAkBpB,GAClBqB,kBAxCW,WACvBlB,EAAW,2BACJD,GADG,IAENpB,MAAOA,MAsCCwC,aAAW,EACXpO,IAAKkN,EAAO,GACZjN,IAAKiN,EAAO,KAGhB,sBAAKzP,UAAU,8BAAf,UACI,cAAC9D,EAAA,EAAD,CACIZ,MAAM,iBACNiG,GAAG,2BACH9B,GAAI,CAAEmR,EAAG,EAAGlR,MAAO,QACnBiB,WAAY,CACRkQ,eAAgB,cAAChQ,EAAA,EAAD,CAAgBC,SAAS,QAAzB,sBAEpBjF,MAAOsS,EAAM,KAEjB,mCACA,cAACjS,EAAA,EAAD,CACIZ,MAAM,kBACNiG,GAAG,2BACH9B,GAAI,CAAEmR,EAAG,EAAGlR,MAAO,QACnBiB,WAAY,CACRkQ,eAAgB,cAAChQ,EAAA,EAAD,CAAgBC,SAAS,QAAzB,sBAEpBjF,MAAOsS,EAAM,WAKzB,sBAAKnO,UAAU,8BAAf,UACI,2DAGA,8BACK2P,EAAc1P,KAAI,SAAA+E,GAAI,OACrB,cAAC8L,GAAA,EAAD,CAAsCC,QAAS,cAACC,GAAA,EAAD,CAAUnB,QAAS7K,EAAK6K,QAAStU,KAAMyJ,EAAK4K,SAAU/P,SAAUqQ,IAAyB5U,MAAO0J,EAAK1J,OAA7H0J,EAAK4K,kBAKtC,sBAAK5P,UAAU,2BAAf,UACI,yCAGA,cAAC8Q,GAAA,EAAD,CAAkBC,QAAS,cAACE,GAAA,EAAD,CAAQpB,QAASN,EAAQ2B,QAAS3V,KAAK,UAAUsE,SAAUqQ,IAAyB5U,MAAO,cAAC,KAAD,gBC7IzH6V,GAAW,yCAAG,WAAOC,GAAP,gBAAA1N,EAAA,sEACPxF,GAAM,CACtB8N,IAAK,UACL9B,OAAQkH,IAHe,cACnBpH,EADmB,yBAKlBA,GALkB,2CAAH,sDCiBlBtN,GAAyB,CAC7ByR,MAAO,CAAC,EAAG,KACX+C,SAAS,EACTnB,WAAW,EACXC,OAAO,EACPC,QAAQ,EACRH,MAAM,GAGKuB,GAAgC,SAAC,GAAQ,gBACpD,MAA4BnS,qBAAW0G,IAA/BxI,EAAR,EAAQA,MAAOF,EAAf,EAAeA,SACPD,EAAciC,qBAAWnC,GAAzBE,UACR,EAA8BqC,mBAAmB5C,IAAjD,mBAAO6S,EAAP,KAAgBC,EAAhB,KACA,EAA4ClQ,mBAAyB,MAArE,mBAAOgS,EAAP,KAAuBC,EAAvB,KACA,EAA4BjS,mBAAmB,CAAC,EAAG,MAAnD,mBAAOmQ,EAAP,KAAe+B,EAAf,KACA,EAAmDhH,oBAAS,SAAUT,IAAnD0H,EAAnB,EAAQ5N,UAAgC6N,EAAxC,EAAkCjT,KAC9B2S,EAAc,CAChB1L,KAAM,GACNC,OAAQ,EACRjB,UAAW,GACXC,QAAS,IAGX,EAA6D6F,oBAAS,CAAC,SAAU4G,IAC/E,kBAAMD,GAAYC,KAAc,CAC9BnG,SAAS,EACTrH,UAAW,SAAAnF,GACT,GAAGA,EAAKA,KAAKkT,QAAU,EAAG,CACxB,IAAMlC,EAAShR,EAAKA,KAAKoN,QAAO,SAACC,EAAU/D,GACzC,OAAO+D,EAAIC,OAAOhE,EAAM1B,cACvB,IACHmJ,EAAW,2BACND,GADK,IAERpB,MAAO,CAAC3G,KAAKjF,IAAL,MAAAiF,KAAI,aAAQiI,IAASjI,KAAKhF,IAAL,MAAAgF,KAAI,aAAQiI,QAE3C+B,EAAU,CAAChK,KAAKjF,IAAL,MAAAiF,KAAI,aAAQiI,IAASjI,KAAKhF,IAAL,MAAAgF,KAAI,aAAQiI,UAZhCmC,EAApB,EAAQnH,WAAiCoH,EAAzC,EAAmCpT,KAAc4M,EAAjD,EAAiDA,QAiBjDrN,qBAAU,WACR,IAAM8T,EAAO,OAAGD,QAAH,IAAGA,OAAH,EAAGA,EAAQpT,KAAKsT,QAAO,SAAChK,GACjC,QAAGA,EAAM1B,WAAakJ,EAAQpB,MAAM,IAAMpG,EAAM1B,WAAakJ,EAAQpB,MAAM,QAExEoB,EAAQ2B,UAAYnJ,EAAMmJ,aAEX,SAAfnJ,EAAMtM,OAAoB8T,EAAQO,UAEnB,cAAf/H,EAAMtM,OAAyB8T,EAAQQ,eAExB,UAAfhI,EAAMtM,OAAqB8T,EAAQS,UAEpB,WAAfjI,EAAMtM,OAAsB8T,EAAQU,eAI3CsB,EAAkBO,KACjB,CAACvC,EAAQQ,UAAWR,EAAQO,KAAMP,EAAQU,OAAQV,EAAQS,MAAOT,EAAQpB,MAAOoB,EAAQ2B,QAAxF,OAAiGW,QAAjG,IAAiGA,OAAjG,EAAiGA,EAAQpT,OAI5G,MAA8Ba,oBAAS,GAAvC,mBAAO6N,EAAP,KAAgBC,EAAhB,KACM7G,EAAWC,eAyBjB,OAAGvJ,EAAUL,cAEX,uBAAMoD,UAAU,SAAhB,UACGyR,EAAgB,cAAC,EAAD,IAAsB,qCACrC,sBAAKzR,UAAU,gBAAf,UACE,cAAC,KAAD,CAAiBA,UAAU,eAAegB,QAAS,kBAAMuF,GAAU,MACnE,cAACyL,GAAA,EAAD,CACEnW,MAAOuB,EAAMsI,KACb7F,SAAU,SAACC,EAAOmS,GAtBF,IAA8CvM,KAsBDuM,IArB7D/U,EAAS,CAAEzB,KAAM8H,GAAcuC,QAASxI,QAASoI,KAsBjD1F,UAAU,uBACVkS,eAAa,EACb3Q,GAAG,iBACH4Q,QAAO,OAAET,QAAF,IAAEA,OAAF,EAAEA,EAAQjT,KACjB2T,YACE,SAAClI,GAAD,OACE,cAAChO,EAAA,EAAD,2BAAegO,GAAf,IAAuBrO,MAAOuB,EAAMsI,KAAMpK,MAAM,uBAGtD,cAAC,GAAD,CAAiB6T,WAAY,cAAC,KAAD,CAAgBnP,UAAU,iBACtCoP,cAAe,cAAC,GAAD,CAAahC,WAAYA,EAAYD,QAASA,EAASoC,QAASA,EAASC,WAAYA,EAAYC,OAAQA,IACxHrC,WAAYA,EAAYD,QAASA,OAEpD,sBAAKnN,UAAU,kBAAf,UACE,cAAC9D,EAAA,EAAD,CAAWT,KAAK,SAASC,QAAQ,WAAWJ,MAAM,0BAAaO,MAAOuB,EAAMuI,OACjErJ,WAAY,CAAEiG,IAAK,IAAKC,IAAK,KAAM6P,KAAM,KAAO5S,GAAI,CAAEC,MAAO,KAC7DG,SAAU,SAACC,GAAD,OA3CP,SAACA,EAAkEwS,GACvFpV,EAAS,CAAEzB,KAAM6W,EAAYhV,QAASwC,EAAM4B,OAAO7F,QA0Cb0W,CAAczS,EAAOyD,GAAcwC,cACnE,cAAC,GAAD,CAAiBwI,YAAY,oBACZC,eAAgB,cAAC,GAAD,CAAU9J,UAAWtH,EAAMsH,UAAWC,QAASvH,EAAMuH,QAC3C9E,SAnDlC,SAAC6E,EAAiBC,GACjCzH,EAAS,CAAEzB,KAAM8H,GAAcyC,aAAc1I,QAASoH,IACtDxH,EAAS,CAAEzB,KAAM8H,GAAc0C,WAAY3I,QAASqH,YAmDhD,cAACJ,GAAA,EAAD,CAAQvE,UAAU,iBAAiBtE,QAAQ,YAAYsF,QAxCnC,WACxBoQ,EAAc,CACZ1L,KAAMtI,EAAMsI,KACZC,OAAQvI,EAAMuI,OACdjB,UAAWkC,KAAOxJ,EAAMsH,WAAWmC,OAAO,cAC1ClC,QAASiC,KAAOxJ,EAAMuH,SAASkC,OAAO,eAExCwE,KAiCI,yBAGF,qBAAKrL,UAAU,YACf,yBAASA,UAAU,yBAAnB,SACG4R,EAAgB,cAAC,EAAD,IAAH,OACVN,QADU,IACVA,OADU,EACVA,EAAgBrR,KAAI,SAAC8H,GAAD,OAAmB,cAAC,GAAD,CAA0BA,MAAOA,GAAjBA,EAAMxG,YAKhE,cAAC,GAAD,K,oDChJIiR,GAAwC,SAAC,GAA4B,IAA3BjX,EAA0B,EAA1BA,KAAMsU,EAAoB,EAApBA,QAASvU,EAAW,EAAXA,MAC5DS,EAAaD,cAAbC,SACR,OACE,cAAC+U,GAAA,EAAD,CAAkBC,QAAS,cAACE,GAAA,EAAD,aAAQwB,eAAgB5C,GAAa9T,EAASR,KAAUD,MAAOA,KCGxFqU,GAAgB,CACpB,CACE9T,MAAO,OACPP,MAAO,OAET,CACEO,MAAO,SACPP,MAAO,UAET,CACEO,MAAO,QACPP,MAAO,SAET,CACEO,MAAO,YACPP,MAAO,eAKEoX,GAAsC,SAAC,GAAoD,IAAnD7O,EAAkD,EAAlDA,UAAWM,EAAuC,EAAvCA,SAAU4D,EAA6B,EAA7BA,MAAO4K,EAAsB,EAAtBA,iBAC/E,EAAgCrT,mBAAQ,OAAwByI,QAAxB,IAAwBA,OAAxB,EAAwBA,EAAOtM,MAAvE,mBAAOmU,EAAP,KAAiBgD,EAAjB,KACM7O,EAAUC,cAEhB,OACE,cAAC,IAAD,2BAAkBD,GAAlB,aACE,uBAAMI,SAAUJ,EAAQK,aAAaD,GAAWnE,UAAU,kBAA1D,UACE,cAAC,EAAD,CAAW1E,MAAM,oBAAeC,KAAK,QAAQC,YAAY,kCAAwBC,KAAK,OAC3EC,QAAQ,WAAWG,MAAK,OAAEkM,QAAF,IAAEA,OAAF,EAAEA,EAAOkE,QAC5C,cAAC,EAAD,CAAW3Q,MAAM,eAAeC,KAAK,OAAOC,YAAY,kCAAwBC,KAAK,OAC1EC,QAAQ,WAAWG,MAAK,OAAEkM,QAAF,IAAEA,OAAF,EAAEA,EAAOrC,OAC5C,cAAC,EAAD,CAAWpK,MAAM,yBAAeC,KAAK,YAAYC,YAAY,uCAAwBC,KAAK,SAC/EC,QAAQ,WAAWE,YAAa,CAAE2G,IAAK,IAAKC,IAAK,KAAM6P,KAAM,KAASxW,MAAK,OAAEkM,QAAF,IAAEA,OAAF,EAAEA,EAAOqE,YAC/F,cAAC,EAAD,CAAW9Q,MAAM,cAAcC,KAAK,aAAaC,YAAY,iCAAuBC,KAAK,SAC9EC,QAAQ,WAAWG,MAAK,OAAEkM,QAAF,IAAEA,OAAF,EAAEA,EAAO1B,aAC5C,cAAC,EAAD,CAAc9K,KAAK,OAAO6F,UAAWuO,GAAe9T,MAAO+T,EAAUrQ,SAAUqT,EACjEtX,MAAM,mCACpB,cAAC,EAAD,CAAWA,MAAM,OAAOC,KAAK,cAAcC,YAAY,qBAAgBC,KAAK,SAASC,QAAQ,WAClFC,WAAW,EAAOE,MAAK,OAAEkM,QAAF,IAAEA,OAAF,EAAEA,EAAOsE,cAC3C,qCAAO,qEAA4B,cAAC,GAAD,CAAY9Q,KAAK,UAAUsU,QAAO,OAAE9H,QAAF,IAAEA,OAAF,EAAEA,EAAOmJ,QAAS5V,MAAO,cAAC,KAAD,SAE5FuI,EAAY,cAACQ,GAAA,EAAD,CAAeC,SAAO,EAAC5I,QAAQ,WAA/B,oBAEO,cAAC6I,GAAA,EAAD,CAAQ9I,KAAK,SAAb,SAAuBkX,W,UCpCvCE,GAAoC,WAC7C,MAAgCvT,mBAAS,IAAzC,mBACA,GADA,UAC0BA,mBAAkB,KAA5C,mBAAOwT,EAAP,KAAcC,EAAd,KACMxM,EAAWC,eACjB,EAA8B/C,uBAAW,yCAAC,WAAOsE,GAAP,kBAAArE,EAAA,6DAClC+C,EAAQ,IAAIC,UACZC,OAAO,QAASoB,EAAMkE,OAC5BxF,EAAME,OAAO,OAAQoB,EAAMrC,MAC3Be,EAAME,OAAO,YAAaoB,EAAMqE,UAAUtF,YAC1CL,EAAME,OAAO,aAAcoB,EAAM1B,WAAWS,YAC5CL,EAAME,OAAO,OAAQoB,EAAMtM,MAC3BgL,EAAME,OAAO,cAAeoB,EAAMsE,aAClC5F,EAAME,OAAO,UAAWoB,EAAMmJ,QAAQpK,YACtCiB,EAAMiL,OAAOC,SAAQ,SAACC,GACpBzM,EAAME,OAAO,SAAUuM,MAVe,UAYjBhV,GAAMyF,KAAK,UAAW8C,GAZL,eAYlCjI,EAZkC,yBAajCA,GAbiC,4CAAD,sDActC,CACDoF,UAAW,SAACnF,GACVK,QAAQC,IAAIN,EAAM,YAClB8H,EAAS,gBAjBL1C,EAAR,EAAQA,UAAWC,EAAnB,EAAmBA,OA+CnB,GA1BqB5E,qBAAWnC,GAAxBG,SACQ8G,cAyBwBmP,aAAY,CAClDC,OAAQ,UACRC,OAAQ,SAAAC,GACN,IAAMC,EAAaD,EAAcrT,KAAI,SAAAuT,GAAI,OAAIC,OAAOC,OAAOF,EAAM,CAC7DG,QAASC,IAAIC,gBAAgBL,QAGjCT,EAAS,GAAD,oBACFD,GADE,aACQS,SARZO,EAAR,EAAQA,aAAcC,EAAtB,EAAsBA,cAmBhBC,EAAM,OAAGlB,QAAH,IAAGA,OAAH,EAAGA,EAAO7S,KAAI,SAAAuT,GAAI,OAC5B,sBAAKxT,UAAU,yBAAf,UACE,cAAC,KAAD,CAAmBA,UAAU,0BAA0BgB,QAAS,kBAR9CiT,EAQiET,EAAKjY,KAP1FuD,QAAQC,IAAI+T,EAAMf,QAAO,SAACyB,GAAD,OAAUA,EAAKjY,OAAS0Y,WACjDlB,EAASD,EAAMf,QAAO,SAACyB,GAAD,OAAUA,EAAKjY,OAAS0Y,MAF3B,IAACA,KASlB,qBACEjU,UAAU,uBACVwJ,IAAKoK,IAAIC,gBAAgBL,GACzB/J,IAAI,qBALqC+J,EAAKjY,SAgBpD,OALAyC,qBAAU,WACR8U,GAASA,EAAMG,SAAQ,SAACO,GAAD,OAAiBI,IAAIM,gBAAgBV,EAAKG,cAChE,CAACb,IAGI,uBAAM9S,UAAU,YAAhB,UACN,mDACA,gCACE,0BAASA,UAAU,gCAAnB,UACE,gDAAS8T,EAAa,CAAE9T,UAAW,yBAAnC,cACE,qCAAW+T,MACX,cAAC,KAAD,CAAcxT,SAAS,UACvB,yEAEF,uBAAOP,UAAU,6BAAjB,SACGgU,OAGL,cAAC,GAAD,CAAWnQ,UAAWA,EAAWM,SAzEpB,SAAC1F,GAChB,IAAM0T,EAAU,CACdgC,UAAW,GACXC,iBAAkB,IAClBC,cAAc,GAEVC,EAAmBxB,EAAM7S,IAAN,yCAAU,WAAOuT,GAAP,gBAAA9P,EAAA,sEACf6Q,aAAiBf,EAAMrB,GADR,cAC3BqC,EAD2B,yBAE1BA,GAF0B,2CAAV,uDAIzB1V,QAAQC,IAAI+T,GACZ2B,QAAQC,IAAIJ,GACT/V,MAAK,SAAC0P,GACL,IAAM0G,EAA8B,2BAC/BlW,GAD+B,IAElCuU,OAAQ/E,IAEVnP,QAAQC,IAAIkP,GACZnK,EAAO6Q,OAuD4ChC,iBAAiB,6BC5GjEiC,GAAsC,SAAC,GAAQ,gBAC1D,IAAMrO,EAAWC,eACTpJ,EAAUyX,eAAVzX,MACR,EAGgCoN,oBAAS,CAAC,QAASpN,EAAMmE,KAAK,kBAAM0I,GAAa7M,EAAMmE,OAF/EwG,EADR,EACEtJ,KACYkM,EAFd,EAEEF,WAEF,EAA8BhH,uBAAW,yCAAC,WAAOsE,GAAP,kBAAArE,EAAA,6DACxC5E,QAAQC,IAAIgJ,EAAMmJ,UACZzK,EAAQ,IAAIC,UACZC,OAAO,QAASoB,EAAMkE,OAC5BxF,EAAME,OAAO,OAAQoB,EAAMrC,MAC3Be,EAAME,OAAO,YAAaoB,EAAMqE,UAAUtF,YAC1CL,EAAME,OAAO,aAAcoB,EAAM1B,WAAWS,YAC5CL,EAAME,OAAO,OAAQoB,EAAMtM,MAC3BgL,EAAME,OAAO,cAAeoB,EAAMsE,aAClC5F,EAAME,OAAO,UAAWoB,EAAMmJ,QAAQpK,YATE,UAWjB5I,GAAM4W,IAAN,kBAAqB1X,EAAMmE,IAAMkF,GAXhB,eAWlCjI,EAXkC,yBAYjCA,GAZiC,4CAAD,sDAatC,CACDoF,UAAW,SAACnF,GACVK,QAAQC,IAAIN,EAAM,YAClB8H,EAAS,gBAhBL1C,EAAR,EAAQA,UAAWC,EAAnB,EAAmBA,OAwBnB,OACE,0BAAS9D,UAAU,aAAnB,UACE,sBAAKA,UAAU,aAAf,UAA4B,cAAC,KAAD,CAAiBA,UAAU,eAAegB,QAAS,kBAAMuF,GAAU,MAAK,gCACpG,cAAC,GAAD,CAAe8C,OAAM,OAAEtB,QAAF,IAAEA,OAAF,EAAEA,EAAOsB,OAAOpJ,KAAI,SAAAsJ,GAAK,OAAIA,EAAMyC,SACzDrB,EAAkB,cAAC,EAAD,IAAuB,cAAC,GAAD,CAAW9G,UAAWA,EAAWM,SAR5D,SAAC1F,GAChBK,QAAQC,IAAIN,GACZqF,EAAOrF,IAMwFsJ,MAAOA,EAAO4K,iBAAiB,2B,UCpCrHoC,GAA8C,SAAC,GAAuB,IAAtBhN,EAAqB,EAArBA,MAAOY,EAAc,EAAdA,SAC1D7E,EAAWL,uBAAW,wBAAC,uBAAAC,EAAA,sEAChBxF,GAAM0K,OAAN,iBAAuBb,EAAMxG,KADb,mFAE5B,CACDqC,UAAW,WACT+E,OAJI7E,OAOR,OACE,qCACE,cAAC,GAAD,CAAWiE,MAAOA,IAClB,sBAAK/H,UAAU,kBAAf,UACE,cAAC,IAAD,CAAMK,GAAG,aAAajD,MAAO,CAACmE,GAAIwG,EAAMxG,IAAxC,oBACA,mBAAGvB,UAAU,0BAA0BgB,QAAS,kBAAM8C,KAAtD,8BCZKkR,GAAoC,SAAC,GAAQ,gBACxD,IAAQ9X,EAAagC,qBAAWnC,GAAxBG,SACR,EAAgDsN,oBAAkB,aAAV,wBAAwB,6BAAA9G,EAAA,sEAC5DxF,GAAMC,IAAI,gBADkD,cACxE6L,EADwE,yBAEvEA,EAAIvL,MAFmE,4CAAlEwW,EAAd,EAAQxW,KAAiBoF,EAAzB,EAAyBA,UAAWwH,EAApC,EAAoCA,QAKpC,OAAQ,sBAAKrL,UAAU,WAAf,UACN,cAACuE,GAAA,EAAD,CAAQvD,QAAS,kBAAM9D,EAAS,CAAEzB,KAAML,EAAYmC,OAAQD,QAAS,MAArE,8BACA,cAAC4X,GAAA,EAAD,CAASlV,UAAU,sBACnB,8CACC6D,EAAY,cAAC,EAAD,IAAH,OAA0BoR,QAA1B,IAA0BA,OAA1B,EAA0BA,EAAWhV,KAAI,SAAC8H,GAAD,OACjD,cAAC,GAAD,CAAeA,MAAOA,EAAOY,SAAU0C,GAActD,EAAMxG,WCLpD4T,GAAsC,WAGjD,OACE,cAAC,GAAD,UACE,eAAC,IAAD,WACE,cAAC,EAAD,IACA,eAAC,KAAD,WACE,cAAC,KAAD,CACE/V,KAAK,UACLgW,QACE,cAAC,GAAD,UACE,cAAC,GAAD,QAKN,cAAC,KAAD,CACEhW,KAAK,UACLgW,QACE,cAAC,GAAD,UACE,cAAC,GAAD,QAIN,cAAC,KAAD,CACEhW,KAAK,kBACLgW,QACE,cAAC,GAAD,UACE,cAAC,GAAD,QAIN,cAAC,KAAD,CACEhW,KAAK,YACLgW,QACE,cAAC,GAAD,UACE,cAAC,GAAD,QAIN,cAAC,KAAD,CACEhW,KAAK,aACLgW,QACE,cAAC,GAAD,UACE,cAAC,GAAD,QAIN,cAAC,KAAD,CACEhW,KAAK,YACLgW,QACE,cAAC,GAAD,UACE,cAAC,GAAD,QAIN,cAAC,KAAD,CACEhW,KAAK,UACLgW,QACE,cAAC,GAAD,MAGJ,cAAC,KAAD,CACEhW,KAAK,aACLgW,QACE,cAAC,GAAD,UACE,cAAC,GAAD,QAKN,cAAC,KAAD,CACEhW,KAAK,IACLgW,QACE,cAAC,GAAD,MAGJ,cAAC,KAAD,CACEhW,KAAK,QACLgW,QACE,cAAC,GAAD,SAMN,cAAC,EAAD,U,oBCpGFC,GAAc,IAAIC,eAAY,CAClCC,eAAgB,CACdC,QAAS,CACP1K,sBAAsB,MAqBb2K,OAff,WAEE,OACE,cAAC,uBAAD,CAAqBC,OAAQL,GAA7B,SACI,cAAC,EAAD,UACE,eAACM,GAAA,EAAD,CAAsBC,aAAW,EAAjC,UACE,cAAC,GAAD,IACA,cAAC,sBAAD,CAAoBC,eAAe,YCrB/CC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.43770c49.chunk.js","sourcesContent":["import { AuthState, User } from \"models/Authentication\";\r\nimport { createContext, Dispatch, FC, useEffect, useReducer } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nexport enum UserActions {\r\n  logout = 'SIGN_OUT',\r\n  setToken = 'SET_TOKEN',\r\n  setRefreshToken = 'SET_REFRESH_TOKEN',\r\n  setUser = 'SET_USER'\r\n}\r\n\r\ntype IActions = {\r\n  type: UserActions;\r\n  payload: string | User;\r\n}\r\n\r\nconst initialState: AuthState = {\r\n  user: null,\r\n  authenticated: false,\r\n  refreshToken: null,\r\n  token: null\r\n};\r\n\r\nexport const UserContext = createContext<{\r\n  userState: AuthState; dispatch: Dispatch<IActions>\r\n}>({\r\n  userState: initialState,\r\n  dispatch: () => null\r\n});\r\n\r\nconst authReducer = (state: AuthState, action: IActions) => {\r\n  const { type, payload } = action;\r\n\r\n  switch (type) {\r\n    case UserActions.logout:\r\n      localStorage.removeItem('LuftBnBAccessToken');\r\n      localStorage.removeItem('LuftBnBRefreshToken');\r\n      return initialState;\r\n    case UserActions.setToken:\r\n      return {\r\n        ...state,\r\n        authenticated: true,\r\n        token: payload as string\r\n      };\r\n    case UserActions.setRefreshToken:\r\n      return {\r\n        ...state,\r\n        refreshToken: payload as string\r\n      };\r\n    case UserActions.setUser:\r\n      return {\r\n        ...state,\r\n        user: payload as User,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\ninterface AuthProviderProps {\r\n  children: JSX.Element;\r\n}\r\n\r\nexport const AuthProvider: FC<AuthProviderProps> = ({ children }) => {\r\n    const [userState, dispatch] = useReducer(authReducer, initialState);\r\n\r\n    useEffect(() => {\r\n      if (localStorage.getItem(\"LuftBnBRefreshToken\")) {\r\n\r\n        axios.get(`${process.env.REACT_APP_API_URL}/auth/refresh-token`, {\r\n          headers:{\r\n            authorization: `Bearer ${localStorage.getItem(\"LuftBnBRefreshToken\")}`\r\n          }\r\n        }).then(response => {\r\n          dispatch({ type: UserActions.setToken, payload: response.data.access_token });\r\n          dispatch({ type: UserActions.setRefreshToken, payload: response.data.refresh_token });\r\n          localStorage.setItem(\"LuftBnBAccessToken\", response.data.access_token);\r\n          localStorage.setItem(\"LuftBnBRefreshToken\", response.data.refresh_token);\r\n          axios.get(`${process.env.REACT_APP_API_URL}/user`, {\r\n            headers: {\r\n              authorization: `Bearer ${response.data.access_token}`\r\n            }\r\n          }).then(user => {\r\n            dispatch({ type: UserActions.setUser, payload: user.data});\r\n          }).catch((error) => console.log(error))\r\n        }).catch((error) => console.log(error))\r\n      }\r\n    }, []);\r\n    return (\r\n      <UserContext.Provider value={{ userState, dispatch }}>\r\n        {children}\r\n      </UserContext.Provider>\r\n    );\r\n  }\r\n;","import TextField from \"@mui/material/TextField\";\r\nimport React, { ChangeEvent } from \"react\";\r\nimport { useFormContext } from \"react-hook-form\";\r\n\r\ninterface TextInputProps {\r\n  label: string;\r\n  name: string;\r\n  placeholder: string;\r\n  type: string;\r\n  variant: \"standard\" | \"filled\" | \"outlined\";\r\n  multiline?: boolean;\r\n  numberProps?: { min: string, max: string, step: string }\r\n  value?: string | number;\r\n}\r\n\r\nconst TextInput: React.FC<TextInputProps> = ({\r\n  label,\r\n  name,\r\n  placeholder,\r\n  type,\r\n  variant,\r\n  multiline,\r\n  numberProps,\r\n  value,\r\n}) => {\r\n  const {\r\n    register,\r\n    formState: {errors},\r\n  } = useFormContext();\r\n  return (\r\n    <TextField\r\n      {...register(name)}\r\n      label={label}\r\n      name={name}\r\n      placeholder={placeholder}\r\n      fullWidth\r\n      type={type}\r\n      color=\"primary\"\r\n      variant={variant}\r\n      error={!!errors[name]}\r\n      multiline={multiline}\r\n      inputProps={numberProps}\r\n      helperText={errors[name] ? errors[name]?.message : \"\"}\r\n      defaultValue={value}\r\n    />\r\n  );\r\n};\r\n\r\nexport default TextInput;\r\n","import React, { useContext, useState } from \"react\";\r\nimport Box from \"@mui/material/Box\";\r\nimport BottomNavigation from \"@mui/material/BottomNavigation\";\r\nimport BottomNavigationAction from \"@mui/material/BottomNavigationAction\";\r\nimport { Link } from \"react-router-dom\";\r\nimport SearchIcon from \"@mui/icons-material/Search\";\r\nimport AccountCircleIcon from \"@mui/icons-material/AccountCircle\";\r\nimport AddCircleOutlineIcon from '@mui/icons-material/AddCircleOutline';\r\nimport SettingsIcon from '@mui/icons-material/Settings';\r\nimport BedIcon from '@mui/icons-material/Bed';\r\nimport { UserContext } from \"../../context/AuthProvider\";\r\nimport LockOpenIcon from '@mui/icons-material/LockOpen';\r\n\r\ninterface BottomNavbarProps {}\r\n\r\ninterface ButtonType {\r\n  label: string;\r\n  path: string;\r\n  icon: JSX.Element;\r\n}\r\n\r\nconst BottomNavbar: React.FC<BottomNavbarProps> = () => {\r\n\r\n  const { userState } = useContext(UserContext);\r\n  const listOfActions: ButtonType[] = [\r\n    {\r\n      label: \"Wyszukaj\",\r\n      path: \"search\",\r\n      icon: <SearchIcon />,\r\n    },\r\n    {\r\n      label: \"Rezerwacje\",\r\n      path: \"myReservations\",\r\n      icon: <BedIcon />,\r\n    },\r\n\r\n    userState.authenticated ? {\r\n      label: \"Dodaj\",\r\n      path: \"addOffer\",\r\n      icon: <AddCircleOutlineIcon />,\r\n    } : {\r\n    label: \"Zaloguj się\",\r\n      path: \"signin\",\r\n      icon: <LockOpenIcon />,\r\n  },\r\n    userState.authenticated ? {\r\n      label: \"Ustawienia\",\r\n      path: \"settings\",\r\n      icon: <SettingsIcon />,\r\n    } :  {\r\n      label: \"Zarejestruj się\",\r\n      path: \"signup\",\r\n      icon: <AccountCircleIcon />,\r\n    }\r\n  ];\r\n  const [value, setValue] = useState(\"search\");\r\n  const handleChange = (event: React.ChangeEvent<{}>, newValue: string) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  //TODO ustawienia, moje oferty\r\n\r\n  return (\r\n    <Box sx={{ width: 500 }}>\r\n      <BottomNavigation\r\n        showLabels\r\n        value={value}\r\n        onChange={handleChange}\r\n        className=\"bottom-navbar\"\r\n      >\r\n        {listOfActions.map((action: ButtonType) => (\r\n          <BottomNavigationAction\r\n            key={action.path}\r\n            label={action.label}\r\n            icon={action.icon}\r\n            value={action.path}\r\n            component={Link}\r\n            to={`/${action.path}`}\r\n          />\r\n        ))}\r\n      </BottomNavigation>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default BottomNavbar;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport AirIcon from \"@mui/icons-material/Air\";\r\n\r\ninterface NavbarProps {}\r\n\r\nconst Navbar: React.FC<NavbarProps> = () => {\r\n  const authenticated = false;\r\n  return (\r\n    <nav className=\"navbar centerXY\">\r\n      {authenticated ? (\r\n        <div className=\"navbar__content\">\r\n          <Link to=\"/home\" className=\"navbar__content__company-name\">\r\n            LuftB&B\r\n          </Link>\r\n\r\n          <></>\r\n        </div>\r\n      ) : (\r\n        <div className=\"navbar__content\">\r\n          <Link to=\"/home\" className=\"navbar__content__company-name\">\r\n            LuftB&B\r\n          </Link>\r\n          <AirIcon fontSize=\"large\" />\r\n        </div>\r\n      )}\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Navbar;","import VisibilityIcon from \"@mui/icons-material/Visibility\";\r\nimport VisibilityOffIcon from \"@mui/icons-material/VisibilityOff\";\r\nimport { IconButton, InputAdornment, TextField } from \"@mui/material\";\r\nimport React, { useState } from \"react\";\r\nimport { useFormContext } from \"react-hook-form\";\r\n\r\ninterface PasswordInputProps {\r\n  label: string;\r\n  name: string;\r\n  variant: \"standard\" | \"filled\" | \"outlined\";\r\n}\r\n\r\nconst PasswordInput: React.FC<PasswordInputProps> = ({\r\n  label,\r\n  name,\r\n  variant,\r\n}) => {\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const toggle = () => {\r\n    setShowPassword(!showPassword);\r\n  };\r\n\r\n  const {\r\n    register,\r\n    formState: { errors },\r\n  } = useFormContext();\r\n  return (\r\n    <TextField\r\n      {...register(name)}\r\n      label={label}\r\n      name={name}\r\n      fullWidth\r\n      type={showPassword ? \"text\" : \"password\"}\r\n      color=\"primary\"\r\n      variant={variant}\r\n      error={!!errors[name]}\r\n      helperText={errors[name] ? errors[name]?.message : \"\"}\r\n      InputProps={{\r\n        endAdornment: (\r\n          <InputAdornment position=\"start\">\r\n            <IconButton onClick={toggle}>\r\n              {showPassword ? (\r\n                <VisibilityIcon style={{ fill: \"#989898\" }} />\r\n              ) : (\r\n                <VisibilityOffIcon style={{ fill: \"#989898\" }} />\r\n              )}\r\n            </IconButton>\r\n          </InputAdornment>\r\n        ),\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default PasswordInput;\r\n","import React from 'react';\r\nimport MenuItem from '@mui/material/MenuItem';\r\nimport Select, { SelectChangeEvent } from '@mui/material/Select';\r\nimport InputLabel from '@mui/material/InputLabel';\r\nimport { FormControl } from \"@mui/material\";\r\nimport { useFormContext } from \"react-hook-form\";\r\nimport { PropertyType } from 'models/Offer';\r\n\r\ninterface Item {\r\n    value: string;\r\n    label: string;\r\n}\r\n\r\ninterface CustomSelectProps {\r\n    value: PropertyType | string;\r\n    setValue: React.Dispatch<React.SetStateAction<PropertyType | string>>;\r\n    variant?: \"filled\" | \"outlined\" | \"standard\";\r\n    label?: string;\r\n    menuItems: Item[];\r\n    placeholder?: string;\r\n    name: string;\r\n}\r\n\r\nconst CustomSelect: React.FC<CustomSelectProps> = ({ name, value, setValue, variant, label, menuItems, placeholder}) => {\r\n\r\n  const {\r\n    register\r\n  } = useFormContext();\r\n    const handleChange = (event: SelectChangeEvent) => {\r\n        setValue(event.target.value);\r\n    };\r\n    return (\r\n        <FormControl>\r\n            <InputLabel id=\"simple-select-label\">{label}</InputLabel>\r\n            <Select\r\n                {...register(name)}\r\n                id=\"simple-select\"\r\n                labelId=\"simple-select-label\"\r\n                value={value ? value : \"\"}\r\n                onChange={handleChange}\r\n                variant={variant}\r\n                label={label}\r\n                placeholder={placeholder}\r\n            >\r\n\r\n                {menuItems.map((menuItem, index) => (<MenuItem key={index} value={menuItem.value}>{menuItem.label}</MenuItem>))}\r\n            </Select>\r\n        </FormControl>\r\n    );\r\n};\r\n\r\nexport default CustomSelect;","import React from 'react';\r\nimport { CircularProgress } from \"@mui/material\";\r\n\r\ninterface LoadingIndicatorProps {\r\n  size?: string | number | undefined;\r\n}\r\n\r\nconst LoadingIndicator: React.FC<LoadingIndicatorProps> = ({size}) => {\r\n  return (<div className=\"loading-indicator\">\r\n    <CircularProgress size={size}/>\r\n  </div>);\r\n};\r\n\r\nexport default LoadingIndicator;","import * as yup from \"yup\";\r\n\r\nconst REGEX_PASSWORD =\r\n  /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,30}$/;\r\n\r\nconst validationCredentials = {\r\n  email: yup.string().email(\"Zły email\").required(\"Email jest wymagany\"),\r\n  password: yup\r\n    .string()\r\n    .required(\"Hasło jest wymagane\")\r\n    .min(8, \"Hasło jest za krótkie\")\r\n    .max(30, \"Hasło jest za długie\")\r\n    .matches(REGEX_PASSWORD, \"Hasło musi zawierać co najmniej jedną wielką i małą literę, znak specjalny oraz cyfrę\"),\r\n};\r\n\r\nexport const signUpSchema = yup.object().shape({\r\n  ...validationCredentials,\r\n  firstName: yup\r\n    .string()\r\n    .required(\"Imię jest wymagane\")\r\n    .min(3, \"Imię jest za krótkie\")\r\n    .max(15, \"Imię jest za długie\"),\r\n  lastName: yup\r\n    .string()\r\n    .required(\"Nazwisko jest wymagane\")\r\n    .min(3, \"Nazwisko jest za krótkie\")\r\n    .max(15, \"Nazwisko jest za długie\"),\r\n  password_confirmation: yup\r\n    .string()\r\n    .required(\"Musisz potwierdzić swoje hasło\")\r\n    .min(8, \"Hasło jest za krótkie\")\r\n    .max(30, \"Hasło jest za długie\")\r\n    .matches(REGEX_PASSWORD, \"Hasło musi zawierać co najmniej jedną wielką i małą literę, znak specjalny oraz cyfrę\"),\r\n});\r\n\r\nexport const signInSchema = yup.object().shape(validationCredentials);\r\n","import axios, {AxiosRequestConfig } from 'axios';\r\n\r\nconst baseURL = process.env.REACT_APP_API_URL;\r\n\r\nconst axiosCustom = axios.create({\r\n    baseURL: baseURL\r\n})\r\n\r\naxiosCustom.interceptors.request.use(function (req: AxiosRequestConfig) {\r\n    req.headers!.authorization = `Bearer ${localStorage.getItem(\"LuftBnBAccessToken\")}`;\r\n    return req;\r\n})\r\n\r\n// axiosCustom.interceptors.response.use(function (response :AxiosResponse) {return response;\r\n// }, function (error) {\r\n//     if(error.response.status === 401) {\r\n//         store.dispatch({type: RESET_AUTH});\r\n//     }\r\n//     return Promise.reject(error);\r\n// });\r\n\r\nexport default axiosCustom;","import React, { createContext, Dispatch, useReducer } from 'react';\r\n\r\nexport enum SearchActions {\r\n  setStartDate = 'SET_START_DATE',\r\n  setEndDate = 'SET_END_DATE',\r\n  setCity = 'SET_CITY',\r\n  setPeople = 'SET_PEOPLE',\r\n}\r\n\r\ntype ISearchActions = {\r\n  type: SearchActions;\r\n  payload: Date | string | number;\r\n}\r\n\r\ntype IState = {\r\n  startDate: Date;\r\n  endDate: Date;\r\n  city: string;\r\n  people: number;\r\n}\r\n\r\nconst initialState: IState = {\r\n  startDate: new Date(),\r\n  endDate: new Date(Date.now() + 86400000),\r\n  city: '',\r\n  people: 1,\r\n};\r\n\r\nexport const SearchContext = createContext<{ state: IState, dispatch: Dispatch<ISearchActions> }>({\r\n  state: initialState,\r\n  dispatch: () => null\r\n});\r\n\r\n\r\n\r\nconst searchReducer = (state: IState, action: ISearchActions) => {\r\n  const { type, payload } = action;\r\n\r\n  switch (type) {\r\n    case SearchActions.setCity:\r\n      return {\r\n        ...state,\r\n        city: payload as string,\r\n      };\r\n    case SearchActions.setPeople:\r\n      return {\r\n        ...state,\r\n        people: payload as number,\r\n      };\r\n    case SearchActions.setStartDate:\r\n      return {\r\n        ...state,\r\n        startDate: payload as Date,\r\n      };\r\n    case SearchActions.setEndDate:\r\n      return {\r\n        ...state,\r\n        endDate: payload as Date,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n\r\ninterface SearchContextProps {\r\n  children: JSX.Element;\r\n}\r\n\r\n\r\nexport const SearchProvider: React.FC<SearchContextProps> = ({ children }) => {\r\n  const [state, dispatch] = useReducer(searchReducer, initialState);\r\n  return (\r\n    <SearchContext.Provider value={{ state, dispatch }}>\r\n      {children}\r\n    </SearchContext.Provider>\r\n  );\r\n};\r\n\r\n","import { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport Button from \"@mui/material/Button\";\r\nimport \"App.scss\";\r\nimport { PasswordInput, TextInput } from \"components\";\r\nimport { signInData } from \"models/Authentication\";\r\nimport React, { useContext } from \"react\";\r\nimport { FormProvider, useForm } from \"react-hook-form\";\r\nimport { signInSchema } from \"./ValidationSchema\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { UserActions, UserContext } from \"context/AuthProvider\";\r\nimport { useMutation } from \"react-query\";\r\nimport axios from \"utils/axiosInstance\";\r\nimport LoadingButton from '@mui/lab/LoadingButton';\r\n\r\ninterface SignInProps {\r\n}\r\n\r\nexport const SignIn: React.FC<SignInProps> = () => {\r\n  const { dispatch } = useContext(UserContext);\r\n  const { data, isLoading, mutate } = useMutation(async (user: signInData) => {\r\n    const response = await axios.post('./auth/login', user);\r\n    return response;\r\n  }, {\r\n    onSuccess: (data) => {\r\n      dispatch({ type: UserActions.setToken, payload: data.data.access_token });\r\n      dispatch({ type: UserActions.setRefreshToken, payload: data.data.refresh_token });\r\n      localStorage.setItem(\"LuftBnBAccessToken\", data.data.access_token);\r\n      localStorage.setItem(\"LuftBnBRefreshToken\", data.data.refresh_token);\r\n      axios.get(`${process.env.REACT_APP_API_URL}/user`, {\r\n        headers: {\r\n          authorization: `Bearer ${data.data.access_token}`\r\n        }\r\n      }).then(user => {\r\n        dispatch({ type: UserActions.setUser, payload: user.data});\r\n      }).catch((error) => console.log(error))\r\n    }\r\n  });\r\n\r\n\r\n  const methods = useForm<signInData>({\r\n    resolver: yupResolver(signInSchema),\r\n  });\r\n\r\n\r\n  const onSubmit = (data: signInData) => {\r\n    mutate(data);\r\n  };\r\n\r\n  return (\r\n    <main className=\"auth\">\r\n      <div className=\"auth__header\">\r\n        <h1>Zaloguj się</h1>\r\n      </div>\r\n\r\n      <FormProvider {...methods}>\r\n        <form\r\n          onSubmit={methods.handleSubmit(onSubmit)}\r\n          className=\"auth__form auth__form--sign-in\"\r\n        >\r\n          <TextInput\r\n            label=\"Email\"\r\n            name=\"email\"\r\n            placeholder=\"email@email.com\"\r\n            type=\"email\"\r\n            variant=\"outlined\"\r\n          />\r\n          <PasswordInput label=\"Hasło\" name=\"password\" variant=\"outlined\"/>\r\n\r\n          {isLoading ? <LoadingButton loading variant=\"contained\">\r\n            Submit\r\n          </LoadingButton> : <Button type=\"submit\" variant=\"contained\">\r\n            Zaloguj się\r\n          </Button>}\r\n        </form>\r\n        <div className=\"auth__footer\">\r\n          <p>Nie masz konta? </p>\r\n          <Link to=\"/signup\">Zarejestruj się</Link>\r\n        </div>\r\n      </FormProvider>\r\n    </main>\r\n  );\r\n};\r\n\r\n","import { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport Button from \"@mui/material/Button\";\r\nimport \"App.scss\";\r\nimport { PasswordInput, TextInput } from \"components\";\r\nimport { signInData, signUpData } from \"models/Authentication\";\r\nimport React, { useContext } from \"react\";\r\nimport { FormProvider, useForm } from \"react-hook-form\";\r\n//import { signUp } from \"store/actions/authActions\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { signUpSchema } from \"./ValidationSchema\";\r\nimport { useMutation } from \"react-query\";\r\nimport axios from \"utils/axiosInstance\";\r\nimport { UserActions, UserContext } from \"context/AuthProvider\";\r\nimport LoadingButton from \"@mui/lab/LoadingButton\";\r\n\r\ninterface SignUpProps {\r\n}\r\n\r\nexport const SignUp: React.FC<SignUpProps> = () => {\r\n  const { dispatch } = useContext(UserContext);\r\n  const { isLoading, mutate } = useMutation(async (user: signInData) => {\r\n    const response = await axios.post('./auth/register', user);\r\n    console.log(response);\r\n    return response;\r\n  }, {\r\n    onSuccess: (data) => {\r\n      dispatch({ type: UserActions.setToken, payload: data.data.access_token });\r\n      dispatch({ type: UserActions.setRefreshToken, payload: data.data.refresh_token });\r\n      localStorage.setItem(\"LuftBnBAccessToken\", data.data.access_token);\r\n      localStorage.setItem(\"LuftBnBRefreshToken\", data.data.refresh_token);\r\n      axios.get(`${process.env.REACT_APP_API_URL}/user`, {\r\n        headers: {\r\n          authorization: `Bearer ${data.data.access_token}`\r\n        }\r\n      }).then(user => {\r\n        dispatch({ type: UserActions.setUser, payload: user.data});\r\n      }).catch((error) => console.log(error))\r\n    }\r\n  });\r\n  const methods = useForm<signUpData>({\r\n    resolver: yupResolver(signUpSchema),\r\n  });\r\n\r\n  const onSubmit = (data: signUpData) => {\r\n    mutate(data)\r\n  };\r\n  return (\r\n    <main className=\"auth\">\r\n      <div className=\"auth__header\">\r\n        <h1>Zarejestruj się</h1>\r\n      </div>\r\n\r\n      <FormProvider {...methods}>\r\n        <form\r\n          onSubmit={methods.handleSubmit(onSubmit)}\r\n          className=\"auth__form auth__form--sign-up\"\r\n        >\r\n          <TextInput\r\n            label=\"Imię\"\r\n            name=\"firstName\"\r\n            placeholder=\"Imię\"\r\n            type=\"text\"\r\n            variant=\"outlined\"\r\n          />\r\n          <TextInput\r\n            label=\"Nazwisko\"\r\n            name=\"lastName\"\r\n            placeholder=\"Nazwisko\"\r\n            type=\"text\"\r\n            variant=\"outlined\"\r\n          />\r\n          <TextInput\r\n            label=\"Email\"\r\n            name=\"email\"\r\n            placeholder=\"email@email.com\"\r\n            type=\"email\"\r\n            variant=\"outlined\"\r\n          />\r\n          <PasswordInput label=\"Password\" name=\"password\" variant=\"outlined\"/>\r\n          <PasswordInput\r\n            label=\"Confirm Password\"\r\n            name=\"password_confirmation\"\r\n            variant=\"outlined\"\r\n          />\r\n\r\n          {isLoading ? <LoadingButton loading variant=\"contained\">\r\n            Submit\r\n          </LoadingButton> :<Button type=\"submit\" variant=\"contained\">\r\n            Zarejestruj się\r\n          </Button>}\r\n        </form>\r\n      </FormProvider>\r\n\r\n      <span className=\"auth__footer\">\r\n        <p>Masz już konto? </p>\r\n        <Link to=\"/signin\" className=\"sign-in__footer__link\">\r\n          Zaloguj się\r\n        </Link>\r\n      </span>\r\n    </main>\r\n  );\r\n};\r\n","import React, { useState } from 'react';\r\nimport 'react-date-range/dist/styles.css';\r\nimport 'react-date-range/dist/theme/default.css';\r\nimport { DateRange, RangeKeyDict } from 'react-date-range';\r\n\r\ninterface CalendarProps {\r\n    startDate: Date;\r\n    endDate: Date;\r\n    disabledDates?: Date[];\r\n    onChange: (startDate: Date, endDate: Date) => void;\r\n}\r\n\r\ninterface pickedDateRange {\r\n    startDate?: undefined | Date;\r\n    endDate?: undefined | Date;\r\n    key?: undefined | string;\r\n}\r\n\r\nexport const Calendar: React.FC<CalendarProps> = ({startDate, endDate, disabledDates, onChange}) => {\r\n    const [state, setState] = useState<pickedDateRange[]>([\r\n        {\r\n            startDate: startDate,\r\n            endDate: endDate,\r\n            key: 'selection'\r\n        }\r\n    ]);\r\n\r\n    const onDateChange = (item: RangeKeyDict) => {\r\n        item.selection.startDate && item.selection.endDate &&\r\n            onChange(item.selection.startDate, item.selection.endDate);\r\n\r\n\r\n        setState([item.selection])\r\n\r\n    }\r\n\r\n    return (<DateRange\r\n        className=\"calendar\"\r\n        showDateDisplay={false}\r\n        onChange={onDateChange}\r\n        moveRangeOnFirstSelection={false}\r\n        minDate={new Date()}\r\n        months={1}\r\n        ranges={state}\r\n        direction=\"horizontal\"\r\n        rangeColors={['#FF385CFF']}\r\n        disabledDates={disabledDates}\r\n    />);\r\n};","import React, { useContext } from 'react';\r\nimport Button from '@mui/material/Button';\r\nimport { SearchContext } from \"context/SearchProvider\";\r\nimport { useMutation } from \"react-query\";\r\nimport axios from \"../../../../utils/axiosInstance\";\r\nimport { Reservation } from \"../../../../models/Offer\";\r\nimport { Link } from \"@mui/material\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport LoadingButton from \"@mui/lab/LoadingButton\";\r\nimport moment from \"moment\";\r\n\r\ninterface OfferReservationProps {\r\n  dailyPrice: number;\r\n  offerId: number;\r\n}\r\n\r\nexport const OfferReservation: React.FC<OfferReservationProps> = ({dailyPrice, offerId}) => {\r\n  const {state} = useContext(SearchContext);\r\n  const {startDate, endDate} = state;\r\n  const navigate = useNavigate();\r\n  const { isLoading, mutate } = useMutation(async () => {\r\n    const fData = new FormData();\r\n    fData.append('startDate', moment(state.startDate).format('YYYY-MM-DD'));\r\n    fData.append('endDate', moment(state.endDate).format('YYYY-MM-DD'));\r\n    fData.append('offer', offerId.toString());\r\n    const response = await axios.post('./reservation', fData);\r\n    return response;\r\n  }, {\r\n    onSuccess: () => {\r\n      navigate('/myReservations');\r\n    }\r\n  });\r\n\r\n  const handleClick = () => {\r\n    mutate();\r\n  };\r\n\r\n  const countDays = (first: Date, second: Date) => {\r\n    const difference = Math.abs(first.getTime() - second.getTime());\r\n    const daysCount = Math.ceil(difference / (1000 * 3600 * 24) + 1);\r\n    return daysCount\r\n  }\r\n\r\n  const calculateTotalPrice = (daysCount: number) => {\r\n    return dailyPrice*daysCount;\r\n  }\r\n\r\n  const formatDate = (date: Date) => {\r\n    const options: Intl.DateTimeFormatOptions = {\r\n      month: 'short', day: 'numeric'\r\n    }\r\n\r\n    return new Intl.DateTimeFormat(\"pl-PL\", options).format(new Date(date));\r\n  }\r\n\r\n  return (\r\n    <div className=\"reservation\">\r\n      <div>\r\n          <h1 className=\"reservation__title\">Rezerwuj</h1>\r\n          <p>{dailyPrice}zł / noc</p>\r\n          <p><u>{formatDate(startDate)} – {formatDate(endDate)}</u></p>\r\n      </div>\r\n      <div  className=\"reservation__total\">\r\n          <p>Łącznie: <u>{calculateTotalPrice(countDays(startDate, endDate))}zł</u></p>\r\n        {isLoading\r\n          ? <LoadingButton loading variant=\"contained\"> Submit </LoadingButton>\r\n          : <Button onClick={() => mutate()}>Rezerwuj</Button>\r\n        }\r\n      </div>\r\n    </div>\r\n  );\r\n};","import React from 'react';\r\nimport { FormProvider, useForm } from \"react-hook-form\";\r\nimport { TextInput } from \"../../../../components\";\r\nimport Rating from '@mui/material/Rating';\r\nimport Box from '@mui/material/Box';\r\nimport StarIcon from '@mui/icons-material/Star';\r\nimport Button from \"@mui/material/Button\";\r\nimport { useMutation } from \"react-query\";\r\nimport axios from \"../../../../utils/axiosInstance\";\r\nimport { IAddOpinion, Offer } from \"models/Offer\";\r\n\r\ninterface AddOpinionProps {\r\n  offer: Offer;\r\n  refetchOpinions: () => {}\r\n}\r\n\r\nexport const AddOpinion: React.FC<AddOpinionProps> = ({refetchOpinions, offer}) => {\r\n  const [value, setValue] = React.useState<number>(2);\r\n  const { isLoading, mutate } = useMutation(async (opinion: IAddOpinion) => {\r\n    const fData = new FormData();\r\n    fData.append('content', opinion.content.toString());\r\n    fData.append('rate', opinion.rate.toString());\r\n    fData.append('offer', opinion.offer.toString());\r\n\r\n    const response = await axios.post('./opinion', fData);\r\n    console.log(response);\r\n    return response;\r\n  }, {\r\n    onSuccess: () => {\r\n      refetchOpinions()\r\n    }\r\n  });\r\n\r\n  const methods = useForm();\r\n\r\n  const onSubmit = (data: any) => {\r\n    const opinion: IAddOpinion = {\r\n      content: data.opinion,\r\n      rate: value,\r\n      offer: offer.id\r\n    }\r\n\r\n    mutate(opinion);\r\n  }\r\n\r\n  return (<article>\r\n    <FormProvider {...methods}>\r\n      <form onSubmit={methods.handleSubmit(onSubmit)}  className=\"add-opinion-form\">\r\n        <div className=\"opinions-title\">\r\n          <h3>Co myślisz o tym obiekcie?</h3>\r\n          <Box\r\n            sx={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n            }}\r\n          >\r\n            <Rating\r\n              name=\"hover-feedback\"\r\n              value={value}\r\n              precision={1}\r\n              onChange={(event, newValue) => {\r\n                setValue(newValue as number);\r\n              }}\r\n              emptyIcon={<StarIcon style={{ opacity: 0.55 }} fontSize=\"inherit\" />}\r\n            />\r\n          </Box>\r\n        </div>\r\n        <TextInput label=\"Dodaj opinię\" name=\"opinion\" placeholder=\"Miejsce na opinię...\" type=\"text\" variant=\"outlined\" multiline={true} />\r\n        <Button type=\"submit\">Dodaj</Button>\r\n      </form>\r\n    </FormProvider>\r\n  </article>);\r\n};","import React, { useContext } from 'react';\r\nimport StarIcon from \"@mui/icons-material/Star\";\r\nimport { IOpinion } from \"../../../../models/Offer\";\r\nimport { useMutation } from \"react-query\";\r\nimport axios from \"../../../../utils/axiosInstance\";\r\nimport { UserContext } from \"../../../../context/AuthProvider\";\r\n\r\n\r\ninterface OpinionProps {\r\n  opinion: IOpinion;\r\n  onDelete: () => {};\r\n}\r\n\r\nexport const Opinion: React.FC<OpinionProps> = ({opinion, onDelete}) => {\r\n  const { userState } = useContext(UserContext);\r\n  const { mutate } = useMutation(async () => {\r\n    return await axios.delete(`/opinion/${opinion.id}`);\r\n  }, {\r\n    onSuccess: () => {\r\n      onDelete();\r\n    }\r\n  } );\r\n  return (<div className=\"opinion\">\r\n    <div className=\"opinion__author\">\r\n      <div>\r\n        <p>{opinion.author.firstName}</p>\r\n        <p className=\"opinion__post-date\">{opinion.date}</p>\r\n      </div>\r\n      <div className=\"opinion__rating\">{opinion.rate}/5 <StarIcon /></div>\r\n    </div>\r\n    <p className=\"opinion__comment\">\r\n      {opinion.content}\r\n    </p>\r\n    {userState.user?.id === opinion.author.id &&\r\n      <p onClick={() => mutate()} className=\"opinion__delete-opinion\">Usuń</p>\r\n    }\r\n  </div>);\r\n};","import React, { useContext } from 'react';\r\nimport StarIcon from '@mui/icons-material/Star';\r\nimport { Offer, IOpinion } from \"../../../../models/Offer\";\r\nimport { AddOpinion } from \"../AddOpinion/AddOpinion\";\r\nimport { Opinion } from \"../Opinion/Opinion\";\r\nimport { UserContext } from \"../../../../context/AuthProvider\";\r\n\r\ninterface OfferOpinionsProps {\r\n    rateCount: number;\r\n    opinionsCount: number;\r\n    opinions: IOpinion[];\r\n    refetchOpinions: () => {};\r\n    offer: Offer;\r\n    offerOwnerId: number;\r\n}\r\n\r\nexport const OfferOpinions: React.FC<OfferOpinionsProps> = ({rateCount, opinionsCount, opinions, refetchOpinions, offer, offerOwnerId}) => {\r\n  const { userState } = useContext(UserContext);\r\nconsole.log(offerOwnerId)\r\n  console.log(userState.user?.id)\r\n\r\n  return (<section>\r\n    {offerOwnerId !== userState.user?.id && <AddOpinion refetchOpinions={refetchOpinions} offer={offer} />}\r\n        <div className=\"opinions-title\">\r\n            <p>Recenzje</p>\r\n            <span className=\"offer__ratings\">\r\n                        <StarIcon/>\r\n                        <p>{rateCount.toFixed(2)}</p>\r\n                        <p className=\"offer--clickable-text\">(Ilość recenzji: {opinionsCount})</p>\r\n                    </span>\r\n        </div>\r\n        {\r\n            opinions.map((opinion: IOpinion) => (\r\n              <Opinion opinion={opinion} onDelete={refetchOpinions} key={opinion.id}/>\r\n            ))\r\n        }\r\n    </section>);\r\n};","import React, { memo } from 'react';\r\nimport {Carousel} from 'react-responsive-carousel';\r\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\";\r\n\r\n\r\n\r\ninterface OfferCarouselProps {\r\n    images?: string[];\r\n}\r\n\r\nconst OfferCarousel: React.FC<OfferCarouselProps> = ({images}) => {\r\n    const imageItems = images?.map((image, key) => (\r\n        <img key={image} src={image} alt={`zdjęcie${key}`}/>\r\n    ));\r\n\r\n    return (\r\n        <Carousel className=\"offer-carousel\" showArrows showStatus={false} dynamicHeight={true} showThumbs={false}>\r\n            {imageItems}\r\n        </Carousel>\r\n    );\r\n};\r\n\r\nexport default memo(OfferCarousel);","import axios from \"../utils/axiosInstance\";\r\n\r\nexport const fetchCities = async () => {\r\n    const res = await axios(\"./cities\");\r\n\r\n    return res;\r\n}","import axios from \"../utils/axiosInstance\";\r\n\r\nexport const getOfferById = async (id: string) => {\r\n  const data = await axios.get(`./offer/${id}`, {\r\n    params: {\r\n      withRatings: true\r\n    }\r\n  })\r\n  return await data.data\r\n}\r\n\r\nexport const getOfferOwner = async (id: string) => {\r\n  const data = await axios.get(`./offer/${id}/owner`)\r\n  return await data.data\r\n}\r\n\r\nexport const getOfferReservations = async (id: string) => {\r\n  const data = await axios.get(`./offer/${id}/reservations`)\r\n  return await data.data\r\n}\r\n\r\nexport const getOfferOpinions = async (id: string) => {\r\n  const data = await axios.get(`./offer/${id}/opinions`)\r\n  return await data.data\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\";\r\nimport { Link, useNavigate, useParams } from 'react-router-dom';\r\nimport ChevronLeftIcon from '@mui/icons-material/ChevronLeft';\r\nimport StarIcon from '@mui/icons-material/Star';\r\nimport { Calendar } from 'components/Calendar/Calendar';\r\nimport { OfferReservation } from \"./components/OfferReservation/OfferReservation\";\r\nimport { OfferOpinions } from \"./components/OfferOpinions/OfferOpinions\";\r\nimport OfferCarousel from \"./components/OfferCarousel/OfferCarousel\";\r\nimport { useQuery, UseQueryResult } from \"react-query\";\r\nimport { fetchCities } from \"actions/homePageActions\";\r\nimport { LoadingIndicator } from \"components\";\r\nimport { getOfferById, getOfferOpinions, getOfferOwner, getOfferReservations } from \"actions/offerPageActions\";\r\nimport { Offer as OfferModel, Reservation } from \"../../models/Offer\";\r\nimport Button from \"@mui/material/Button\";\r\nimport { User } from \"models/Authentication\";\r\nimport { SearchActions, SearchContext } from \"context/SearchProvider\";\r\nimport { UserContext } from \"../../context/AuthProvider\";\r\n\r\ninterface OfferProps {\r\n\r\n}\r\n\r\nconst Offer: React.FC<OfferProps> = () => {\r\n  const { isFetching, data: cityData, error } = useQuery('cities', fetchCities);\r\n  const navigate = useNavigate();\r\n  const { id } = useParams();\r\n  const { state, dispatch } = useContext(SearchContext);\r\n  const { userState } = useContext(UserContext);\r\n\r\n\r\n  const {\r\n    data: offer,\r\n    isFetching: isOfferFetching\r\n  }: UseQueryResult<OfferModel> = useQuery(['offer', id], () => getOfferById(id!));\r\n\r\n  const { data: offerOwner, isFetching: isOfferOwnerFetching }: UseQueryResult<User> =\r\n    useQuery(['offerOwner', id], () => getOfferOwner(id!));\r\n\r\n  const { data: offerReservations, isFetching: isOfferReservationFetching } =\r\n    useQuery<Reservation[]>(['offerReservations', id], () => getOfferReservations(id!), {\r\n      refetchOnWindowFocus: true,\r\n      refetchInterval: 60000\r\n    });\r\n\r\n  const {\r\n    data: offerOpinions,\r\n    isFetching: isOfferOpinionsLoading,\r\n    refetch: opinionsRefetch\r\n  } =\r\n    useQuery(['offerOpinions', id], () => getOfferOpinions(id!), { enabled: false });\r\n\r\n\r\n  const onChange = (startDate: Date, endDate: Date) => {\r\n    dispatch({ type: SearchActions.setStartDate, payload: startDate });\r\n    dispatch({ type: SearchActions.setEndDate, payload: endDate });\r\n  };\r\n\r\n  const disabledDatesForReservations = offerReservations?.map(reservation => {\r\n    const startDate = new Date(reservation.startDate);\r\n    const endDate = new Date(reservation.endDate);\r\n    let tempDate = new Date(startDate.getTime());\r\n    const reservationDates = [];\r\n    reservationDates.push(startDate);\r\n    while (tempDate.getTime() < endDate.getTime()) {\r\n      tempDate.setDate(tempDate.getDate() + 1);\r\n      reservationDates.push(new Date(tempDate));\r\n    }\r\n    return reservationDates;\r\n  });\r\n\r\n  const disabledDates = disabledDatesForReservations?.reduce((acc, date) => {\r\n    return acc.concat(date);\r\n  }, []);\r\n\r\n  if (isOfferFetching || isOfferOwnerFetching) {\r\n    return <LoadingIndicator/>;\r\n  }\r\n  return (\r\n    <main className=\"offer\">\r\n      <nav className=\"offer__nav\">\r\n        <ChevronLeftIcon onClick={() => navigate(-1)}/>\r\n        {/*<FavoriteBorderIcon/>*/}\r\n        {userState.user?.id === offerOwner?.id && <Link to=\"/editOffer\" state={{ id: offer?.id }}>Edytuj</Link>}\r\n      </nav>\r\n\r\n      <OfferCarousel images={offer?.images.map(image => image.url)}/>\r\n\r\n      <section className=\"offer__content\">\r\n        <h1 className=\"offer__title\">\r\n          {offer?.title}\r\n        </h1>\r\n\r\n        <article className=\"offer__info\">\r\n                    <span className=\"offer__ratings\">\r\n                        <StarIcon/>\r\n                        <p>{Number(offer?.ratings.rateCount).toFixed(2)}</p>\r\n                        <p className=\"offer--clickable-text\">(Ilość rezenzji: {offer?.ratings.opinionsCount})</p>\r\n                    </span>\r\n          <p className=\"offer--clickable-text\">{offer?.city}</p>\r\n        </article>\r\n\r\n        <div className=\"offer__divider\"/>\r\n\r\n        <article className=\"offer__info\">\r\n          <div className=\"offer__host-info\">\r\n            <p>Mały domek</p>\r\n            <p>Ilość gości: {offer?.maxPeople}</p>\r\n            <p>Gospodarz: {offerOwner?.firstName}</p>\r\n            <p>Email: {offerOwner?.email}</p>\r\n          </div>\r\n\r\n        </article>\r\n        <div className=\"offer__divider\"/>\r\n        <article className=\"offer__description\">\r\n          <p>{offer?.description}</p>\r\n        </article>\r\n        <div className=\"offer__divider\"/>\r\n        <article className=\"offer__reservation\">\r\n          <Calendar startDate={state.startDate} endDate={state.endDate} onChange={onChange}\r\n                    disabledDates={disabledDates}/>\r\n          <OfferReservation dailyPrice={offer!.dailyPrice} offerId={offer!.id}/>\r\n        </article>\r\n\r\n        <div className=\"offer__divider\"/>\r\n        {!offerOpinions && !isOfferOpinionsLoading\r\n          ? <div className=\"offer__opinion-fetch-wrapper\">\r\n            <Button className=\"offer__opinion-refresh-button\" onClick={() => opinionsRefetch()}>Załaduj opinie</Button>\r\n          </div>\r\n          : isOfferOpinionsLoading\r\n            ? <LoadingIndicator/>\r\n            : <article className=\"offer__opinions\">\r\n              <OfferOpinions rateCount={Number(offer?.ratings.rateCount)}\r\n                             opinionsCount={Number(offer?.ratings.opinionsCount)}\r\n                             opinions={offerOpinions}\r\n                             offer={offer!}\r\n                             refetchOpinions={opinionsRefetch}\r\n                             offerOwnerId={offerOwner!.id!}\r\n              />\r\n            </article>\r\n        }\r\n      </section>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default Offer;\r\n","import React, { useContext } from \"react\";\r\nimport List from \"@mui/material/List\";\r\nimport ListItem from \"@mui/material/ListItem\";\r\nimport ListItemButton from \"@mui/material/ListItemButton\";\r\nimport ListItemIcon from \"@mui/material/ListItemIcon\";\r\nimport ListItemText from \"@mui/material/ListItemText\";\r\nimport Box from \"@mui/material/Box\";\r\nimport LocationOnIcon from \"@mui/icons-material/LocationOn\";\r\nimport IconButton from \"@mui/material/IconButton\";\r\nimport ChevronLeftIcon from \"@mui/icons-material/ChevronLeft\";\r\nimport { useQuery } from \"react-query\";\r\nimport { fetchCities } from \"actions/homePageActions\";\r\nimport { LoadingIndicator } from 'components';\r\nimport Button from \"@mui/material/Button\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { SearchActions, SearchContext } from \"context/SearchProvider\";\r\n\r\n\r\ninterface SearchDrawerProps {\r\n}\r\n\r\nexport const SearchDrawer: React.FC<SearchDrawerProps> = ({}) => {\r\n  const { isLoading, data, isError, refetch } = useQuery('cities', fetchCities);\r\n  const { state, dispatch } = useContext(SearchContext);\r\n\r\n  const handleClick = (city: string) => {\r\n    //dispatch({type: SearchActions.setCity, payload: city});\r\n    console.log(SearchActions.setCity)\r\n    dispatch({ type: SearchActions.setCity, payload: city });\r\n  }\r\n\r\n  return (\r\n    <section>\r\n      <div className=\"search-drawer\">\r\n        <div>\r\n          <IconButton aria-label=\"delete\">\r\n            <ChevronLeftIcon/>\r\n          </IconButton>\r\n\r\n          <input\r\n            type=\"text\"\r\n            className=\"search-drawer__input\"\r\n            placeholder=\"Dokąd chcesz pojechać?\"\r\n          />\r\n        </div>\r\n        <p>W DOWOLNYM MIEJSCU, W DOWOLNYM CZASIE</p>\r\n      </div>\r\n\r\n      <Box\r\n        sx={{\r\n          width: \"100%\",\r\n          bgcolor: \"background.paper\",\r\n          paddingBottom: \"20px\",\r\n        }}\r\n      >\r\n        <nav aria-label=\"main mailbox folders\">\r\n\r\n\r\n          {isLoading ? <LoadingIndicator/> :\r\n            <List>\r\n              {data && data.data.map((city: string) => (\r\n                <ListItem disablePadding key={city} to={`/search`} component={Link} onClick={() => handleClick(city)}>\r\n                  <ListItemButton>\r\n                    <ListItemIcon>\r\n                      <LocationOnIcon/>\r\n                    </ListItemIcon>\r\n                    <ListItemText primary={city}/>\r\n                  </ListItemButton>\r\n                </ListItem>\r\n              ))\r\n              }\r\n            </List>\r\n          }\r\n          {\r\n            isError && <div className=\"search-drawer__refresh-wrapper\">\r\n              <Button className=\"search-drawer__refresh-button\" onClick={() => refetch()}>Załaduj ponownie</Button>\r\n            </div>\r\n          }\r\n\r\n        </nav>\r\n      </Box>\r\n    </section>\r\n  );\r\n};\r\n","import React, { useContext, useState } from \"react\";\r\nimport Drawer from \"@mui/material/Drawer\";\r\nimport { SearchDrawer } from \"./SearchDrawer\";\r\nimport SearchIcon from \"@mui/icons-material/Search\";\r\nimport { UserContext } from \"../../context/AuthProvider\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\n\r\ninterface HomeProps {}\r\n\r\nexport const Home: React.FC<HomeProps> = () => {\r\n\r\n  const { userState } = useContext(UserContext);\r\n  const [visible, setVisible] = useState(false);\r\n  const toggle = () => {\r\n    setVisible(!visible);\r\n  };\r\n\r\n  const navigate = useNavigate();\r\n\r\n  return (\r\n    <main>\r\n      <div className=\"home\">\r\n        <h1>Wybierz swoje wymarzone miejsce na podróż</h1>\r\n        <button onClick={ () => userState.authenticated ? toggle() : navigate(\"/signin\")} className=\"home__button\">\r\n          <SearchIcon fontSize=\"medium\" className=\"home__search-icon\" />\r\n          Dokąd chcesz pojechać?\r\n        </button>\r\n\r\n      </div>\r\n      <Drawer open={visible} onClose={toggle} anchor=\"top\">\r\n        <SearchDrawer />\r\n      </Drawer>\r\n    </main>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport FavoriteTwoToneIcon from '@mui/icons-material/FavoriteTwoTone';\r\nimport { Link } from \"react-router-dom\";\r\nimport { Offer } from \"models/Offer\";\r\n\r\ninterface OfferTileProps {\r\n    offer: Offer\r\n}\r\n\r\nexport const OfferTile: React.FC<OfferTileProps> = ({offer}) => {\r\n    return (\r\n        <Link to={`/offer/${offer.id}`}>\r\n\r\n            <div className=\"tile-offer\">\r\n                <h2>{offer.title}</h2>\r\n                <div className=\"tile-offer__image\">\r\n                    <img src={offer.images[0]?.url} alt=\"obrazek\"/>\r\n                    <FavoriteTwoToneIcon className=\"tile-offer__icon\" />\r\n\r\n                </div>\r\n                <div className=\"tile-offer__description\">\r\n\r\n                    <p><u>Lokalizacja:</u> {offer.city}</p>\r\n                    <p>{offer.description}</p>\r\n                    <p className=\"tile-offer__description__price-per-day\"><strong>{offer.dailyPrice} zł</strong> / noc</p>\r\n                </div>\r\n            </div>\r\n        </Link>\r\n    );\r\n};","import React from 'react';\r\nimport Button from \"@mui/material/Button\";\r\nimport { useMutation } from \"react-query\";\r\nimport axios from \"utils/axiosInstance\";\r\nimport LoadingButton from \"@mui/lab/LoadingButton\";\r\n\r\ninterface ReservationTileProps {\r\n  totalPrice: number;\r\n  startDate: string;\r\n  endDate: string;\r\n  reservationId: number;\r\n  onDelete: () => {};\r\n}\r\n\r\nexport const ReservationTile: React.FC<ReservationTileProps> = ({ totalPrice, startDate, endDate, reservationId, onDelete}) => {\r\n  const { mutate, isLoading} = useMutation(async () => {\r\n    return await axios.delete(`/reservation/${reservationId}`);\r\n  }, {\r\n    onSuccess: () => {\r\n      onDelete();\r\n  }\r\n  } );\r\n  const today = new Date();\r\n  const firstDay = new Date(startDate);\r\n  return (<div className=\"my-reservations__reservation-tile\">\r\n    <div>\r\n      <div className=\"my-reservations__totalPrice\">Łączna cena za pobyt: <strong>{totalPrice} zł</strong></div>\r\n      <p>Data przyjazdu: {startDate}</p>\r\n      <p>Ostatni dzień: {endDate}</p>\r\n    </div>\r\n    {/*{today < firstDay && <Button onClick={() => mutate()}>Anuluj rezerwację</Button>}*/}\r\n    {isLoading\r\n      ? <LoadingButton loading variant=\"contained\"> Submit </LoadingButton>\r\n      : today < firstDay && <Button onClick={() => mutate()}>Anuluj rezerwację</Button>\r\n    }\r\n  </div>);\r\n};","import React, { useContext } from \"react\";\r\nimport Button from \"@mui/material/Button\";\r\nimport { Link } from 'react-router-dom';\r\nimport { UserContext } from \"../../context/AuthProvider\";\r\nimport { useQuery } from \"react-query\";\r\nimport axios from \"utils/axiosInstance\";\r\nimport { OfferTile } from \"../search/components/OfferTile\";\r\nimport { UserReservation } from \"../../models/Offer\";\r\nimport { ReservationTile } from \"./components/ReservationTile/ReservationTile\";\r\nimport { LoadingIndicator } from \"../../components\";\r\nimport { SignIn } from \"../auth/SignIn\";\r\n\r\ninterface MyReservationsProps {\r\n}\r\n\r\nexport const MyReservations: React.FC<MyReservationsProps> = ({}) => {\r\n  const { userState } = useContext(UserContext);\r\n\r\n  const { isFetching, data: userReservations, refetch } = useQuery('myReservations', async () => {\r\n    const result = await axios.get(`./user/reservation`);\r\n    return result;\r\n  });\r\n\r\n\r\n  if (userState.authenticated)\r\n    return (\r\n      <main className=\"my-reservations\">\r\n        {isFetching\r\n          ? <LoadingIndicator/>\r\n          : <section className=\"my-reservations__content\">\r\n            <h1>Moje rezerwacje</h1>\r\n            <div>\r\n              {userReservations?.data.map((reservation: UserReservation) =>\r\n                <div key={reservation.id}>\r\n                  <OfferTile offer={reservation.offer}/>\r\n                  <ReservationTile totalPrice={reservation.price} startDate={reservation.startDate}\r\n                                   endDate={reservation.endDate} reservationId={reservation.id} onDelete={refetch}/>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </section>\r\n        }\r\n      </main>\r\n    );\r\n\r\n  return (\r\n    <SignIn />\r\n  );\r\n};\r\n","import { Navigate, useLocation } from \"react-router-dom\";\r\nimport React, { useContext } from \"react\";\r\nimport { UserContext } from \"../context/AuthProvider\";\r\n\r\ninterface ProtectedRouteProps {\r\n  children: JSX.Element;\r\n}\r\n\r\nexport const ProtectedRoute: React.FC<ProtectedRouteProps> = ({ children }) => {\r\n  const {userState} = useContext(UserContext);\r\n\r\n  if (userState.authenticated) {\r\n    return children;\r\n  }\r\n\r\n  return <Navigate to=\"/signin\" />;\r\n};\r\n","import { Navigate } from \"react-router-dom\";\r\nimport React, { useContext } from \"react\";\r\nimport { UserContext } from \"../context/AuthProvider\";\r\n\r\ninterface PublicRouteProps {\r\n  children: JSX.Element;\r\n}\r\n\r\nexport const PublicRoute: React.FC<PublicRouteProps> = ({ children }) => {\r\n  const { userState } = useContext(UserContext);\r\n\r\n  if (userState.authenticated) {\r\n    return <Navigate to=\"/home\" />;\r\n  }\r\n  return children;\r\n};\r\n","import React from 'react';\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Popover from \"@mui/material/Popover\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Box from \"@mui/material/Box\";\r\n\r\ninterface CalendarPopoverProps {\r\n    buttonLabel: string;\r\n    popoverContent: JSX.Element;\r\n}\r\n\r\nexport const CalendarPopover: React.FC<CalendarPopoverProps> = ({buttonLabel, popoverContent}) => {\r\n    const [anchorEl, setAnchorEl] = React.useState<HTMLButtonElement | null>(null);\r\n    const open = Boolean(anchorEl);\r\n    const id = open ? 'simple-popover' : undefined;\r\n\r\n    const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Button aria-describedby={id} variant=\"contained\" onClick={handleClick}>\r\n                {buttonLabel}\r\n            </Button>\r\n            <Popover\r\n                id={id}\r\n                open={open}\r\n                anchorEl={anchorEl}\r\n                onClose={handleClose}\r\n                anchorOrigin={{\r\n                    vertical: 'center',\r\n                    horizontal: 'center',\r\n                }}\r\n            >\r\n\r\n              {popoverContent}\r\n            </Popover>\r\n        </>\r\n        );\r\n};","import React from 'react';\r\nimport Drawer from \"@mui/material/Drawer\";\r\nimport { SvgIconProps } from \"@mui/material/SvgIcon\";\r\n\r\ninterface DrawerComponentProps {\r\n    buttonLabel?: string;\r\n    drawerContent: JSX.Element;\r\n    drawerIcon?: React.ReactElement<SvgIconProps>;\r\n    visible: boolean;\r\n    setVisible: React.Dispatch<React.SetStateAction<boolean>>;\r\n}\r\n\r\nexport const DrawerComponent: React.FC<DrawerComponentProps> = ({drawerIcon, buttonLabel, drawerContent, visible, setVisible}) => {\r\n    const toggle = () => {\r\n        setVisible(!visible);\r\n    };\r\n    return (\r\n        <div>\r\n            {buttonLabel && <button onClick={toggle}>\r\n                {buttonLabel}\r\n            </button>}\r\n            {drawerIcon && <div onClick={toggle}>{drawerIcon}</div>}\r\n            <Drawer open={visible} onClose={toggle} anchor=\"top\">\r\n                {drawerContent}\r\n            </Drawer>\r\n        </div>\r\n    );\r\n};","import React, { Dispatch, SetStateAction, useState, FC, SyntheticEvent, ChangeEvent } from 'react';\r\nimport IconButton from \"@mui/material/IconButton\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport Slider from \"@mui/material/Slider\";\r\nimport Checkbox from '@mui/material/Checkbox';\r\nimport Switch from '@mui/material/Switch';\r\nimport FormControlLabel from '@mui/material/FormControlLabel';\r\nimport SmokingRoomsIcon from '@mui/icons-material/SmokingRooms';\r\nimport InputAdornment from '@mui/material/InputAdornment';\r\nimport TextField from '@mui/material/TextField';\r\nimport Button from '@mui/material/Button';\r\nimport { Ifilters } from \"models/Offer\";\r\n\r\n\r\n\r\ninterface MoreFiltersProps {\r\n    setVisible: Dispatch<SetStateAction<boolean>>;\r\n    setFilters: Dispatch<SetStateAction<Ifilters>>\r\n    visible: boolean;\r\n    filters: Ifilters;\r\n    prices: number[]\r\n}\r\n\r\nfunction valuetext(value: number) {\r\n    return `${value} $`;\r\n}\r\n\r\nconst minDistance = 10;\r\n\r\n\r\nexport const MoreFilters: FC<MoreFiltersProps> = ({setVisible, visible, filters, setFilters, prices}) => {\r\n    const [price, setPrice] = useState<number[]>(filters.price);\r\n\r\n    const propertyTypes = [\r\n        {\r\n            label: \"Dom\",\r\n            property: \"home\",\r\n            checked: filters.home\r\n        },\r\n        {\r\n            label: \"Apartament\",\r\n            property: \"apartment\",\r\n            checked: filters.apartment\r\n        },\r\n        {\r\n            label: \"Hotel\",\r\n            property: \"hotel\",\r\n            checked: filters.hotel\r\n        },\r\n        {\r\n            label: \"Hostel\",\r\n            property: \"hostel\",\r\n            checked: filters.hostel\r\n        },\r\n    ];\r\n    const handleChange1 = (\r\n        event: Event | SyntheticEvent,\r\n        newValue: number | number[],\r\n        activeThumb: number\r\n    ) => {\r\n        if (!Array.isArray(newValue)) {\r\n            return;\r\n        }\r\n        activeThumb === 0 ? setPrice([Math.min(newValue[0], price[1] - minDistance), price[1]]) : setPrice([price[0], Math.max(newValue[1], price[0] + minDistance)]);\r\n    };\r\n\r\n    const updateFiltersPrice = () => {\r\n        setFilters({\r\n            ...filters,\r\n            price: price\r\n        })\r\n    }\r\n\r\n    const handleChangeCheckbox = (event: ChangeEvent<HTMLInputElement>) => {\r\n        setFilters({\r\n            ...filters,\r\n            [event.target.name] : event.target.checked\r\n        })\r\n        console.log({\r\n            ...filters,\r\n            [event.target.name] : event.target.checked\r\n        })\r\n    }\r\n\r\n\r\n    return (<div className=\"more-filters\">\r\n            <div className=\"more-filters__header\">\r\n                <IconButton onClick={() => setVisible(!visible)}>\r\n                    <CloseIcon />\r\n                </IconButton>\r\n                <h2>Więcej filtrów</h2>\r\n                <div></div>\r\n            </div>\r\n        <div className=\"more-filters__container\">\r\n\r\n            <div className=\"more-filters__price\">\r\n                <h2>\r\n                    Cena za noc\r\n\r\n                </h2>\r\n                <Slider\r\n                    getAriaLabel={() => 'Minimum distance'}\r\n                    value={price}\r\n                    onChange={handleChange1}\r\n                    valueLabelDisplay=\"auto\"\r\n                    getAriaValueText={valuetext}\r\n                    onChangeCommitted={updateFiltersPrice}\r\n                    disableSwap\r\n                    min={prices[0]}\r\n                    max={prices[1]}\r\n\r\n                />\r\n                <div className=\"more-filters__price__inputs\">\r\n                    <TextField\r\n                        label=\"Cena minimalna\"\r\n                        id=\"outlined-start-adornment\"\r\n                        sx={{ m: 1, width: '15ch' }}\r\n                        InputProps={{\r\n                            startAdornment: <InputAdornment position=\"start\">zł</InputAdornment>,\r\n                        }}\r\n                        value={price[0]}\r\n                    />\r\n                    <h2>-</h2>\r\n                    <TextField\r\n                        label=\"Cena maksymalna\"\r\n                        id=\"outlined-start-adornment\"\r\n                        sx={{ m: 1, width: '15ch' }}\r\n                        InputProps={{\r\n                            startAdornment: <InputAdornment position=\"start\">zł</InputAdornment>,\r\n                        }}\r\n                        value={price[1]\r\n                    }\r\n                    />\r\n                </div>\r\n            </div>\r\n            <div className=\"more-filters__property-type\">\r\n                <h2>\r\n                    Rodzaj nieruchomości\r\n                </h2>\r\n                <div>\r\n                    {propertyTypes.map(item => (\r\n                      <FormControlLabel key={item.property} control={<Checkbox checked={item.checked} name={item.property} onChange={handleChangeCheckbox}/>} label={item.label} />\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"more-filters__facilities\">\r\n                <h2>\r\n                    Palenie\r\n                </h2>\r\n                <FormControlLabel control={<Switch checked={filters.smoking} name=\"smoking\" onChange={handleChangeCheckbox}/>} label={<SmokingRoomsIcon />} />\r\n            </div>\r\n        </div>\r\n\r\n    </div>);\r\n};","import axios from 'utils/axiosInstance';\r\n\r\ninterface OfferParams {\r\n  city: string;\r\n  people: number;\r\n  startDate: string;\r\n  endDate: string;\r\n}\r\n\r\nexport const fetchOffers = async (offerParams: OfferParams) => {\r\n  const res = await axios({\r\n    url: \"./offer\",\r\n    params: offerParams\r\n  });\r\n  return res;\r\n};","import React, { useContext, useEffect, useState } from 'react';\r\nimport { CalendarPopover } from \"./components/CalendarPopover\";\r\nimport { Calendar } from \"../../components/Calendar/Calendar\";\r\nimport TextField from '@mui/material/TextField';\r\nimport Autocomplete from '@mui/material/Autocomplete';\r\nimport ChevronLeftIcon from \"@mui/icons-material/ChevronLeft\";\r\nimport FilterListIcon from '@mui/icons-material/FilterList';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { DrawerComponent } from \"../../components/Drawer/DrawerComponent\";\r\nimport { MoreFilters } from \"./components/MoreFilters\";\r\nimport { OfferTile } from \"./components/OfferTile\";\r\nimport { useQuery } from \"react-query\";\r\nimport { fetchCities } from \"../../actions/homePageActions\";\r\nimport { fetchOffers } from \"../../actions/searchPageActions\";\r\nimport { LoadingIndicator } from \"components\";\r\nimport { Ifilters, Offer } from \"models/Offer\";\r\nimport { SearchActions, SearchContext } from \"../../context/SearchProvider\";\r\nimport Button from \"@mui/material/Button\";\r\nimport moment from \"moment\";\r\nimport { UserContext } from \"../../context/AuthProvider\";\r\nimport { SignIn } from \"../auth/SignIn\";\r\nimport {PropertyType} from \"models/Offer\";\r\n\r\ninterface SearchProps {\r\n}\r\n\r\nconst initialState: Ifilters = {\r\n  price: [0, 10000],\r\n  smoking: false,\r\n  apartment: true,\r\n  hotel: true,\r\n  hostel: true,\r\n  home: true,\r\n}\r\n\r\nexport const Search: React.FC<SearchProps> = ({}) => {\r\n  const { state, dispatch } = useContext(SearchContext);\r\n  const { userState } = useContext(UserContext);\r\n  const [filters, setFilters] = useState<Ifilters>(initialState);\r\n  const [filteredOffers, setFilteredOffers] = useState<Offer[] | null>(null);\r\n  const [prices, setPrices] = useState<number[]>([0, 10000]);\r\n  const { isLoading: loadingCities, data: cities } = useQuery('cities', fetchCities);\r\n  let offerParams = {\r\n    city: \"\",\r\n    people: 1,\r\n    startDate: \"\",\r\n    endDate: \"\",\r\n  }\r\n\r\n  const { isFetching: loadingOffers, data: offers, refetch } = useQuery(['offers', offerParams],\r\n    () => fetchOffers(offerParams), {\r\n      enabled: false,\r\n      onSuccess: data => {\r\n        if(data.data.length >= 1) {\r\n          const prices = data.data.reduce((acc: any, offer: any) => {\r\n            return acc.concat(offer.dailyPrice);\r\n          }, []);\r\n          setFilters({\r\n            ...filters,\r\n            price: [Math.min(...prices), Math.max(...prices)]\r\n          })\r\n          setPrices([Math.min(...prices), Math.max(...prices)]);\r\n        }\r\n      }\r\n    });\r\n\r\n  useEffect(() => {\r\n    const fOffers = offers?.data.filter((offer: Offer) => {\r\n        if(offer.dailyPrice < filters.price[0] || offer.dailyPrice > filters.price[1])\r\n          return false;\r\n        if(filters.smoking && !offer.smoking)\r\n          return false\r\n        if(offer.type === \"HOME\" && !filters.home)\r\n          return false;\r\n        if(offer.type === \"APARTMENT\" && !filters.apartment)\r\n          return false;\r\n        if(offer.type === \"HOTEL\" && !filters.hotel)\r\n          return false;\r\n        if(offer.type === \"HOSTEL\" && !filters.hostel)\r\n          return false;\r\n        return true;\r\n    })\r\n    setFilteredOffers(fOffers);\r\n  }, [filters.apartment, filters.home, filters.hostel, filters.hotel, filters.price, filters.smoking, offers?.data]);\r\n\r\n\r\n\r\n  const [visible, setVisible] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  const onChange = (startDate: Date, endDate: Date) => {\r\n    dispatch({ type: SearchActions.setStartDate, payload: startDate });\r\n    dispatch({ type: SearchActions.setEndDate, payload: endDate });\r\n  };\r\n\r\n  const onInputChange = (event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>, actionType: SearchActions) => {\r\n    dispatch({ type: actionType, payload: event.target.value });\r\n  };\r\n\r\n  const onCityInputChange = (event: React.SyntheticEvent<Element, Event>, city: string | null) =>{\r\n    city && dispatch({ type: SearchActions.setCity, payload: city });\r\n  }\r\n\r\n  const searchButtonClick = () => {\r\n    offerParams = {\r\n      city: state.city,\r\n      people: state.people,\r\n      startDate: moment(state.startDate).format('YYYY-MM-DD'),\r\n      endDate: moment(state.endDate).format('YYYY-MM-DD'),\r\n    }\r\n    refetch();\r\n  }\r\n\r\n  if(userState.authenticated)\r\n  return (\r\n    <main className=\"search\">\r\n      {loadingCities ? <LoadingIndicator/> : <>\r\n        <div className=\"search__input\">\r\n          <ChevronLeftIcon className=\"search__icon\" onClick={() => navigate(-1)}/>\r\n          <Autocomplete\r\n            value={state.city}\r\n            onChange={(event, newInputValue) => onCityInputChange(event, newInputValue)}\r\n            className=\"search__autocomplete\"\r\n            disablePortal\r\n            id=\"combo-box-demo\"\r\n            options={cities?.data}\r\n            renderInput={\r\n              (params) =>\r\n                <TextField {...params} value={state.city} label=\"Wybierz miasto\"/>\r\n            }\r\n          />\r\n          <DrawerComponent drawerIcon={<FilterListIcon className=\"search__icon\"/>}\r\n                           drawerContent={<MoreFilters setVisible={setVisible} visible={visible} filters={filters} setFilters={setFilters} prices={prices}/>}\r\n                           setVisible={setVisible} visible={visible}/>\r\n        </div>\r\n        <div className=\"search__filters\">\r\n          <TextField type=\"number\" variant=\"outlined\" label=\"Ilość osób\" value={state.people}\r\n                     inputProps={{ min: \"1\", max: \"10\", step: \"1\" }} sx={{ width: 150 }}\r\n                     onChange={(event) => onInputChange(event, SearchActions.setPeople)}/>\r\n          <CalendarPopover buttonLabel=\"Wybierz datę\"\r\n                           popoverContent={<Calendar startDate={state.startDate} endDate={state.endDate}\r\n                                                     onChange={onChange}/>}/>\r\n        </div>\r\n        <Button className=\"search__button\" variant=\"contained\" onClick={searchButtonClick}>Wyszukaj</Button>\r\n      </>\r\n      }\r\n      <div className=\"divider\"/>\r\n      <section className=\"search__display-offers\">\r\n        {loadingOffers ? <LoadingIndicator/>\r\n          : filteredOffers?.map((offer: Offer) => (<OfferTile key={offer.id} offer={offer}/>))\r\n        }\r\n      </section>\r\n    </main>\r\n  );\r\n  return <SignIn />\r\n}","import React from 'react';\r\nimport { FormControlLabel, Switch } from \"@mui/material\";\r\nimport { useFormContext } from \"react-hook-form\";\r\n\r\ninterface FormSwitchProps {\r\n  name: string;\r\n  checked?: boolean;\r\n  label: string | JSX.Element;\r\n}\r\n\r\nexport const FormSwitch: React.FC<FormSwitchProps> = ({name, checked, label}) => {\r\n  const { register } = useFormContext();\r\n  return (\r\n    <FormControlLabel control={<Switch defaultChecked={checked} {...register(name)}/>} label={label}/>\r\n  );\r\n};","import React, { useState } from 'react';\r\nimport { CustomSelect, TextInput } from \"../index\";\r\nimport SmokingRoomsIcon from \"@mui/icons-material/SmokingRooms\";\r\nimport LoadingButton from \"@mui/lab/LoadingButton\";\r\nimport Button from \"@mui/material/Button\";\r\nimport { FormProvider, useForm } from \"react-hook-form\";\r\nimport { IaddOffer, IaddOfferWithPhotos, Offer, PropertyType } from \"../../models/Offer\";\r\nimport { FormSwitch } from \"../FormSwitch/FormSwitch\";\r\n\r\ninterface OfferFormProps {\r\n  isLoading: boolean;\r\n  onSubmit: (data: IaddOfferWithPhotos | IaddOffer) => void;\r\n  offer?: Offer;\r\n  submitButtonName: string;\r\n}\r\n\r\nconst propertyTypes = [\r\n  {\r\n    value: \"HOME\",\r\n    label: \"Dom\"\r\n  },\r\n  {\r\n    value: \"HOSTEL\",\r\n    label: \"Hostel\"\r\n  },\r\n  {\r\n    value: \"HOTEL\",\r\n    label: \"Hotel\"\r\n  },\r\n  {\r\n    value: \"APARTMENT\",\r\n    label: \"Apartament\"\r\n  }\r\n];\r\n\r\n\r\nexport const OfferForm: React.FC<OfferFormProps> = ({isLoading, onSubmit, offer, submitButtonName}) => {\r\n  const [property, setProperty] = useState<PropertyType | string>(offer?.type);\r\n  const methods = useForm();\r\n\r\n  return (\r\n    <FormProvider {...methods}>\r\n      <form onSubmit={methods.handleSubmit(onSubmit)} className=\"add-offer__form\">\r\n        <TextInput label=\"Tytuł oferty\" name=\"title\" placeholder=\"Wprowadź nazwę oferty\" type=\"text\"\r\n                   variant=\"outlined\" value={offer?.title}/>\r\n        <TextInput label=\"Nazwa miasta\" name=\"city\" placeholder=\"Wprowadź nazwę miasta\" type=\"text\"\r\n                   variant=\"outlined\" value={offer?.city}/>\r\n        <TextInput label=\"Ilość miejsc\" name=\"maxPeople\" placeholder=\"Wprowadź ilość miejsc\" type=\"number\"\r\n                   variant=\"outlined\" numberProps={{ min: \"1\", max: \"10\", step: \"1\" }}   value={offer?.maxPeople}/>\r\n        <TextInput label=\"Cena za noc\" name=\"dailyPrice\" placeholder=\"Wprowadź cenę za noc\" type=\"number\"\r\n                   variant=\"outlined\" value={offer?.dailyPrice}/>\r\n        <CustomSelect name=\"type\" menuItems={propertyTypes} value={property} setValue={setProperty}\r\n                      label=\"Wybierz nieruchomość\"/>\r\n        <TextInput label=\"Opis\" name=\"description\" placeholder=\"Wprowadź opis\" type=\"number\" variant=\"outlined\"\r\n                   multiline={true}  value={offer?.description}/>\r\n        <span> <p>Można palić w środku?</p><FormSwitch name=\"smoking\" checked={offer?.smoking} label={<SmokingRoomsIcon />} /></span>\r\n        {\r\n          isLoading ? <LoadingButton loading variant=\"outlined\">\r\n            Submit\r\n          </LoadingButton> : <Button type=\"submit\">{submitButtonName}</Button>\r\n        }\r\n      </form>\r\n\r\n    </FormProvider>\r\n  );\r\n};","import { CustomSelect, TextInput } from 'components';\r\nimport React, { useContext, useEffect, useState } from 'react';\r\nimport { UserActions, UserContext } from \"context/AuthProvider\";\r\nimport { useDropzone } from 'react-dropzone';\r\nimport { FormControlLabel, Switch } from '@mui/material';\r\nimport SmokingRoomsIcon from \"@mui/icons-material/SmokingRooms\";\r\nimport { FormProvider, useForm } from \"react-hook-form\";\r\nimport { IaddOffer, IaddOfferWithPhotos } from \"../../models/Offer\";\r\nimport Button from \"@mui/material/Button\";\r\nimport DownloadIcon from '@mui/icons-material/Download';\r\nimport DeleteForeverIcon from '@mui/icons-material/DeleteForever';\r\nimport { useMutation } from \"react-query\";\r\nimport axios from \"../../utils/axiosInstance\";\r\nimport { Image } from 'models/Offer';\r\nimport LoadingButton from '@mui/lab/LoadingButton';\r\nimport { OfferForm } from \"../../components/OfferForm/OfferForm\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport imageCompression from 'browser-image-compression';\r\n\r\ninterface AddOfferProps {\r\n\r\n}\r\n\r\nexport const AddOffer: React.FC<AddOfferProps> = () => {\r\n    const [property, setProperty] = useState('');\r\n    const [files, setFiles] = useState<Image[]>([]);\r\n    const navigate = useNavigate();\r\n    const { isLoading, mutate } = useMutation(async (offer: IaddOfferWithPhotos) => {\r\n      const fData = new FormData();\r\n      fData.append('title', offer.title);\r\n      fData.append('city', offer.city);\r\n      fData.append('maxPeople', offer.maxPeople.toString());\r\n      fData.append('dailyPrice', offer.dailyPrice.toString());\r\n      fData.append('type', offer.type!);\r\n      fData.append('description', offer.description);\r\n      fData.append('smoking', offer.smoking.toString());\r\n      offer.photos.forEach((photo) => {\r\n        fData.append(\"photos\", photo);\r\n      });\r\n      const response = await axios.post('./offer', fData);\r\n      return response;\r\n    }, {\r\n      onSuccess: (data) => {\r\n        console.log(data, 'przeszlo');\r\n        navigate('/settings');\r\n      }\r\n    });\r\n\r\n    const { dispatch } = useContext(UserContext);\r\n    const methods = useForm();\r\n    const onSubmit = (data: IaddOffer) => {\r\n      const options = {\r\n        maxSizeMB: 0.5,\r\n        maxWidthOrHeight: 1000,\r\n        useWebWorker: true\r\n      }\r\n      const compressedPhotos = files.map(async (file) => {\r\n        const img = await imageCompression(file, options);\r\n        return img;\r\n      })\r\n      console.log(files);\r\n      Promise.all(compressedPhotos)\r\n        .then((result) => {\r\n          const offerData: IaddOfferWithPhotos = {\r\n            ...data,\r\n            photos: result\r\n          };\r\n          console.log(result);\r\n          mutate(offerData);\r\n        })\r\n\r\n\r\n    };\r\n\r\n    const { getRootProps, getInputProps } = useDropzone({\r\n      accept: 'image/*',\r\n      onDrop: acceptedFiles => {\r\n        const addedFiles = acceptedFiles.map(file => Object.assign(file, {\r\n            preview: URL.createObjectURL(file)\r\n          }\r\n        ));\r\n        setFiles(\r\n          [...files, ...addedFiles]\r\n        );\r\n      }\r\n    });\r\n\r\n    const handleDelete = (fileName: string) => {\r\n      console.log(files.filter((file) => file.name === fileName));\r\n      setFiles(files.filter((file) => file.name !== fileName));\r\n    };\r\n\r\n\r\n    const thumbs = files?.map(file => (\r\n      <div className=\"add-offer__thumb-inner\" key={file.name}>\r\n        <DeleteForeverIcon className=\"add-offer__delete-photo\" onClick={() => handleDelete(file.name)}/>\r\n        <img\r\n          className=\"add-offer__thumb-img\"\r\n          src={URL.createObjectURL(file)}\r\n          alt=\"dropzone-photo\"\r\n        />\r\n\r\n      </div>\r\n    ));\r\n\r\n    useEffect(() => {\r\n      files && files.forEach((file: Image) => URL.revokeObjectURL(file.preview));\r\n    }, [files]);\r\n\r\n\r\n    return (<main className=\"add-offer\">\r\n      <h1>Dodaj ofertę</h1>\r\n      <div>\r\n        <section className=\"add-offer__container-dropzone\">\r\n          <div {...getRootProps({ className: 'add-offer__dropzone' })}>\r\n            <input {...getInputProps()} />\r\n            <DownloadIcon fontSize=\"large\"/>\r\n            <p>Wrzuć zdjęcia albo kilknij</p>\r\n          </div>\r\n          <aside className=\"add-offer__thumb-container\">\r\n            {thumbs}\r\n          </aside>\r\n        </section>\r\n        <OfferForm isLoading={isLoading} onSubmit={onSubmit} submitButtonName=\"Dodaj ofertę\"/>\r\n      </div>\r\n\r\n\r\n    </main>);\r\n  }\r\n;","import React, { useEffect } from 'react';\r\nimport { OfferForm } from \"../../components/OfferForm/OfferForm\";\r\nimport { useMutation, useQuery, UseQueryResult } from \"react-query\";\r\nimport { IaddOffer, Offer as OfferModel } from \"../../models/Offer\";\r\nimport axios from \"../../utils/axiosInstance\";\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { getOfferById } from \"../../actions/offerPageActions\";\r\nimport { LoadingIndicator } from 'components';\r\nimport OfferCarousel from \"../offer/components/OfferCarousel/OfferCarousel\";\r\nimport ChevronLeftIcon from \"@mui/icons-material/ChevronLeft\";\r\n\r\ninterface EditOfferProps {\r\n\r\n}\r\n\r\nexport const EditOffer: React.FC<EditOfferProps> = ({}) => {\r\n  const navigate = useNavigate();\r\n  const { state } = useLocation();\r\n  const {\r\n    data: offer,\r\n    isFetching: isOfferFetching\r\n  }: UseQueryResult<OfferModel> = useQuery(['offer', state.id], () => getOfferById(state.id!));\r\n  const { isLoading, mutate } = useMutation(async (offer: IaddOffer) => {\r\n    console.log(offer.smoking)\r\n    const fData = new FormData();\r\n    fData.append('title', offer.title);\r\n    fData.append('city', offer.city);\r\n    fData.append('maxPeople', offer.maxPeople.toString());\r\n    fData.append('dailyPrice', offer.dailyPrice.toString());\r\n    fData.append('type', offer.type!);\r\n    fData.append('description', offer.description);\r\n    fData.append('smoking', offer.smoking.toString());\r\n\r\n    const response = await axios.put(`./offer/${state.id}`, fData);\r\n    return response;\r\n  }, {\r\n    onSuccess: (data) => {\r\n      console.log(data, 'przeszlo');\r\n      navigate(\"/settings\")\r\n    }\r\n  });\r\n\r\n  const onSubmit = (data: IaddOffer) => {\r\n    console.log(data)\r\n    mutate(data);\r\n  }\r\n  return (\r\n    <section className=\"edit-offer\">\r\n      <div className=\"offer__nav\"><ChevronLeftIcon className=\"search__icon\" onClick={() => navigate(-1)}/><></></div>\r\n      <OfferCarousel images={offer?.images.map(image => image.url)}/>\r\n    {isOfferFetching ? <LoadingIndicator /> : <OfferForm isLoading={isLoading} onSubmit={onSubmit} offer={offer} submitButtonName=\"Edytuj ofertę\"/>}\r\n  </section>\r\n  );\r\n};","import React from 'react';\r\nimport { OfferTile } from \"../../search/components/OfferTile\";\r\nimport { Offer } from \"models/Offer\";\r\nimport Button from '@mui/material/Button';\r\nimport { useMutation } from \"react-query\";\r\nimport axios from \"../../../utils/axiosInstance\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\n\r\n\r\ninterface UserOfferTileProps {\r\n  offer: Offer;\r\n  onDelete: () => {}\r\n}\r\n\r\nexport const UserOfferTile: React.FC<UserOfferTileProps> = ({offer, onDelete}) => {\r\n  const { mutate } = useMutation(async () => {\r\n    return await axios.delete(`/offer/${offer.id}`);\r\n  }, {\r\n    onSuccess: () => {\r\n      onDelete();\r\n    }\r\n  } );\r\n  return (\r\n    <>\r\n      <OfferTile offer={offer}/>\r\n      <div className=\"user-offer-tile\">\r\n        <Link to=\"/editOffer\" state={{id: offer.id}}>Edytuj</Link>\r\n        <p className=\"user-offer-tile--delete\" onClick={() => mutate()}>Usuń</p>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n","import React, { useContext } from 'react';\r\nimport { UserActions, UserContext } from \"../../context/AuthProvider\";\r\nimport Button from \"@mui/material/Button\";\r\nimport { Divider } from \"@mui/material\";\r\nimport { useQuery } from \"react-query\";\r\nimport axios from \"utils/axiosInstance\";\r\nimport { LoadingIndicator } from \"../../components\";\r\nimport { Offer } from 'models/Offer';\r\nimport { OfferTile } from \"../search/components/OfferTile\";\r\nimport { UserOfferTile } from \"./components/UserOfferTile\";\r\n\r\ninterface SettingsProps {\r\n\r\n}\r\n\r\nexport const Settings: React.FC<SettingsProps> = ({}) => {\r\n  const { dispatch } = useContext(UserContext);\r\n  const { data: userOffer, isLoading, refetch } = useQuery<Offer[]>('userOffers', async () => {\r\n    const res = await axios.get(\"./user/offer\");\r\n    return res.data;\r\n  })\r\n  // @ts-ignore\r\n  return (<div className=\"settings\">\r\n    <Button onClick={() => dispatch({ type: UserActions.logout, payload: '' })}>Wyloguj się</Button>\r\n    <Divider className=\"settings__divider\"/>\r\n    <h1>Twoje oferty</h1>\r\n    {isLoading ? <LoadingIndicator /> : userOffer?.map((offer: Offer) => (\r\n      <UserOfferTile offer={offer} onDelete={refetch} key={offer.id}/>\r\n    ))}\r\n\r\n  </div>);\r\n};","import \"App.scss\";\r\n//import { RootState } from \"store\";\r\nimport { BottomNavbar, Navbar } from \"components\";\r\nimport { SignIn } from \"pages/auth/SignIn\";\r\nimport { SignUp } from \"pages/auth/SignUp\";\r\nimport Offer from \"pages/offer/Offer\";\r\nimport React from \"react\";\r\nimport { BrowserRouter as Router, Route, Routes } from \"react-router-dom\";\r\nimport { Home } from \"../pages/home/Home\";\r\nimport { MyReservations } from \"../pages/myReservations/MyReservations\";\r\nimport { ProtectedRoute } from \"./ProtectedRoute\";\r\nimport { PublicRoute } from \"./PublicRoute\";\r\nimport { Search } from \"../pages/search/Search\";\r\nimport { AddOffer } from \"pages/addOffer/AddOffer\";\r\nimport { SearchProvider } from \"../context/SearchProvider\";\r\nimport { EditOffer } from \"../pages/editOffer/EditOffer\";\r\nimport { Settings } from \"pages/settingsPage/Settings\";\r\n\r\n\r\ninterface RoutesProps {\r\n}\r\n\r\nexport const RoutesConfig: React.FC<RoutesProps> = () => {\r\n\r\n\r\n  return (\r\n    <SearchProvider>\r\n      <Router>\r\n        <Navbar/>\r\n        <Routes>\r\n          <Route\r\n            path=\"/signup\"\r\n            element={\r\n              <PublicRoute>\r\n                <SignUp/>\r\n              </PublicRoute>\r\n\r\n            }\r\n          />\r\n          <Route\r\n            path=\"/signin\"\r\n            element={\r\n              <PublicRoute>\r\n                <SignIn/>\r\n              </PublicRoute>\r\n            }\r\n          />\r\n          <Route\r\n            path=\"/myReservations\"\r\n            element={\r\n              <ProtectedRoute>\r\n                <MyReservations/>\r\n              </ProtectedRoute>\r\n            }\r\n          />\r\n          <Route\r\n            path=\"/addOffer\"\r\n            element={\r\n              <ProtectedRoute>\r\n                <AddOffer/>\r\n              </ProtectedRoute>\r\n            }\r\n          />\r\n          <Route\r\n            path=\"/editOffer\"\r\n            element={\r\n              <ProtectedRoute>\r\n                <EditOffer/>\r\n              </ProtectedRoute>\r\n            }\r\n          />\r\n          <Route\r\n            path=\"/settings\"\r\n            element={\r\n              <ProtectedRoute>\r\n                <Settings/>\r\n              </ProtectedRoute>\r\n            }\r\n          />\r\n          <Route\r\n            path=\"/search\"\r\n            element={\r\n              <Search/>\r\n            }\r\n          />\r\n          <Route\r\n            path=\"/offer/:id\"\r\n            element={\r\n              <ProtectedRoute>\r\n                <Offer/>\r\n              </ProtectedRoute>\r\n            }\r\n          />\r\n\r\n          <Route\r\n            path=\"/\"\r\n            element={\r\n              <Home/>\r\n            }\r\n          />\r\n          <Route\r\n            path=\"/home\"\r\n            element={\r\n              <Home/>\r\n            }\r\n          />\r\n\r\n        </Routes>\r\n\r\n        <BottomNavbar/>\r\n      </Router>\r\n    </SearchProvider>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport \"./App.scss\";\r\nimport \"./styles/global.scss\";\r\nimport { RoutesConfig } from \"./routes/RoutesConfig\";\r\nimport StyledEngineProvider from \"@mui/material/StyledEngineProvider\";\r\nimport { QueryClient, QueryClientProvider } from 'react-query';\r\nimport { ReactQueryDevtools } from 'react-query/devtools';\r\nimport { AuthProvider } from \"./context/AuthProvider\";\r\n\r\nconst queryClient = new QueryClient({\r\n  defaultOptions: {\r\n    queries: {\r\n      refetchOnWindowFocus: false\r\n    },\r\n  },\r\n});\r\n\r\n\r\nfunction App() {\r\n\r\n  return (\r\n    <QueryClientProvider client={queryClient}>\r\n        <AuthProvider>\r\n          <StyledEngineProvider injectFirst>\r\n            <RoutesConfig/>\r\n            <ReactQueryDevtools initialIsOpen={false}/>\r\n          </StyledEngineProvider>\r\n        </AuthProvider>\r\n    </QueryClientProvider>\r\n  );\r\n\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}